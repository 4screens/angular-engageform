<h2 class="theme-question-color text-left" data-ng-bind-html="question.text | nl2br" data-ng-if="!!question.text"></h2>
<div class="main-content-description theme-question-color text-left" data-ng-if="!!question.description">
  <p data-ng-bind-html="question.description | nl2br"></p>
</div>
<div class="header__wrapper" data-ng-if="!!currentQuestion.mainMedia() && !!mainMediaImg()" >
  <picture class="main-media-image"
    data-ng-class="{'no-transform': !question.imageData, 'transform': question.imageData}"
  data-ng-style="{'padding-bottom': mainMediaImg().paddingBottom + '%'}"
  >
    <img data-ng-style="{
        'width': mainMediaImg().width + '%',
        'left' : (question.imageData.left > 0 ? question.imageData.left : 0) + '%',
        'top'  : (question.imageData.top  > 0 ? question.imageData.top  : 0) + '%'
      }"
      data-ng-src="{{ getMainImgUrl( currentQuestion.mainMedia().src, 680, '1.0' ) }}"
      data-ng-srcset="{{ getMainImgUrl( currentQuestion.mainMedia().src, 680, '1.0' ) }},
                      {{ getMainImgUrl( currentQuestion.mainMedia().src, 680, '1.5' ) }} 1.5x,
                      {{ getMainImgUrl( currentQuestion.mainMedia().src, 680, '2.0' ) }} 2.0x"
    >
  </picture>
</div>
<div class="list">
  <div data-ng-repeat="answer in question.answers" class="questionnaire__answer questionnaire__answer--picture-choice "
      data-ng-class="{'questionnaire__answer--selected':  questionAnswer.selected === answer._id, 'questionnaire__answer--notcorrect': !!questionAnswer.selected && questionAnswer.selected !== answer._id  }"
      data-ng-click="sendAnswer( answer._id )">
     <figure data-ng-class="{
      'theme-button-color questionnaire__answer--selected': questionAnswer.selected === answer._id,
      'theme-answer-background-color theme-answer-border-color': questionAnswer.selected !== answer._id,
      'questionnaire__answer--notcorrect': !!questionAnswer.selected && questionAnswer.selected !== answer._id
    }">
        <div class="image-wrapper">
          <picture class="thumb-media-image">
            <img
              data-ng-style="{
                'width': answer.imageData.width + '%',
                'left': answer.imageData.left + '%',
                'top': answer.imageData.top + '%'
              }"
              data-ng-src="{{ getImgUrl( currentQuestion.answerMedia( answer.imageFile ), 300, '1.0' ) }}"
              data-ng-srcset="{{ getImgUrl( currentQuestion.answerMedia( answer.imageFile ), 300, '1.0' ) }},
                              {{ getImgUrl( currentQuestion.answerMedia( answer.imageFile ), 300, '1.5' ) }} 1.5x,
                              {{ getImgUrl( currentQuestion.answerMedia( answer.imageFile ), 300, '2.0' ) }} 2.0x"
            >
          </picture>
          <div class="answer__bar"
            data-ng-class="{'theme-answer-select-background-result-color': questionAnswer.selected === answer._id, 'theme-answer-background-result-color': questionAnswer.selected !== answer._id }"
            ng-style="{
              '-moz-transform': formatAnswersTransform(questionAnswer.stats[answer._id], true),
              '-webkit-transform': formatAnswersTransform(questionAnswer.stats[answer._id], true),
              '-o-transform': formatAnswersTransform(questionAnswer.stats[answer._id], true),
              '-ms-transform': formatAnswersTransform(questionAnswer.stats[answer._id], true),
              'transform': formatAnswersTransform(questionAnswer.stats[answer._id], true),
            }"
            data-ng-if="question.settings.showAnswers && question.settings.showAnswers !== false && !!questionAnswer.stats"
              ></div>
        </div>
        <figcaption data-ng-class="{
          'theme-question-color': questionAnswer.selected === answer._id,
          'theme-answer-color': questionAnswer.selected !== answer._id
        }">
          {{ answer.text }}
        </figcaption>
        <div class="results"
             data-ng-class="{ 'theme-question-color': questionAnswer.selected === answer._id,
                              'theme-answer-color': questionAnswer.selected !== answer._id}">
          <span class="results__precent" data-ng-if="question.settings.showAnswers && question.settings.showAnswers !== false && questionAnswer.selected ">
            {{ !!questionAnswer.stats[answer._id] ? (100 * questionAnswer.stats[answer._id]) : 0 | number:1 }}<span class="precent">%</span>
          </span>
          <span class="results__triangle"
              data-ng-if="question.settings.showCorrectAnswer && question.settings.showCorrectAnswer !== false && questionAnswer.selected === answer._id "
              data-ng-class="{'is-correct': !!question.settings.showCorrectAnswer && !!questionAnswer.status[ answer._id ].correct, 'is-incorrect': !questionAnswer.status[ answer._id ].correct }">
            <i class="fa" data-ng-class="{'fa-check': questionAnswer.status[ answer._id ].correct, 'fa-times': !questionAnswer.status[ answer._id ].correct }"></i>
          </span>
        </div>
      </figure>
  </div>
</div>

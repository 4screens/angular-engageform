<link rel="stylesheet" type="text/css" data-ng-href="{{ customThemeCssFile || staticThemeCssFile }}" data-ng-if="!!customThemeCssFile || !!staticThemeCssFile" />

<div id="four-screens-application" class="{{screenType}}" ng-class="themeName">
  <div class="theme-background-image-file-wrapper theme-background-brightness theme-background-color">
    <picture data-ng-if="quiz.theme.backgroundImageFile" class="position-{{quiz.theme.backgroundImagePosition}}">
      <source
        media="(min-width: 1021px)"
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <source
        media="(min-width: 769px)"
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1020, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1020, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1020, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <source
        media="(min-width: 481px)"
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 768, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 768, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 768, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <source
        media="(min-width: 0px)"
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 480, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 480, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 480, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <img
        data-ng-src="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.0', quiz.theme.backgroundImageBlur ) }}"
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
    </picture>
  </div>
  <div class="four-screens__embed-container theme-main-font" data-ng-class="wayAnimateClass">
    <div data-ng-repeat="question in questions | questionsFilter" class="questionnaire animate-if" data-ng-if="$index == currentQuestion.index()">
      <div class="question-content-wrapper question-content-wrapper--{{question.type}}" question-initialized>
        <div
          class="four-screens__content wrapper"
          data-ng-class="{
            'content__type--forms': question.type == 'forms',
            'content__type--multi-choice': question.type == 'multiChoice',
            'content__type--picture-choice': question.type == 'pictureChoice',
            'content__type--rate-it': question.type == 'rateIt',
            'content__type--start-page': question.type == 'startPage',
            'content__type--end-page': question.type == 'endPage'
          }"
          data-ng-include="'views/engageform/question-' + question.type + '.html'">
        </div>
      </div>
    </div>
  </div>
  <!-- 404 -->
  <div class="four-screens__embed-container theme-main-font page404" data-ng-if="show404">
    <div class="questionnaire animate-if">
      <div class="question-content-wrapper question-content-wrapper--404">
        <div class="four-screens__content wrapper">
          <h2 class="theme-question-color text-center">Engageform not found</h2>
          <div class="main-content-description theme-question-color text-center">
            <p>We're sorry, we can't find the engageform you're looking for.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--/404 -->
  <div class="message-box message-box__require theme-button-color theme-question-color" data-ng-class="{'is-active': !!requiredMessage }" >{{requiredMessage}}</div>
  <div class="four-screens__footer" data-ng-if="questions[currentQuestion.index()].type !== 'startPage' && questions[currentQuestion.index()].type !== 'endPage'">
    <div class="progress">
      <span class="progress__bar">
        <span class="progress__bar--line theme-button-color"
              data-ng-class="{'progress__bar--full-size': progressBarWidth() === 100 }"
              data-ng-style="{'width': progressBarWidth()+'%'}">
        </span>
      </span>
    </div>
    <div class="four-screens__footer-logo">
      <span>Made with:</span>
      <a title="4Screens" href="http://4screens.net/" target="_blank" 
      ng-class="{
        'logo-dark-32': themeName === 'theme-dark' || ( themeName === 'theme-light' && isHigherThanViewport ) || ( themeName === 'theme-light' && smallViewport ),
        'logo-light-32': themeName === 'theme-light' && !isHigherThanViewport && !smallViewport
      }">4Screens</a>
    </div>
    <button class="progress__btn progress__btn--prev fa-stack fa-lg" data-ng-show="hasPrev()" data-ng-click="prev()">
      <i class="fa fa-circle fa-stack-2x theme-navigation-btn-color"></i>
      <i class="fa fa-angle-left"></i>
    </button>

    <button class="progress__btn progress__btn--next fa-stack fa-lg" data-ng-show="pagination.curr() < pagination.last" data-ng-click="next($event)">
      <i class="fa fa-circle fa-stack-2x theme-navigation-btn-color"></i>
      <i class="fa fa-angle-right"></i>
    </button>

    <button class="progress__btn progress__btn--submit theme-button-color theme-question-color" data-ng-show="pagination.curr() == pagination.last" data-ng-click="submitQuiz($event)">
      <span>submit</span>
    </button>
  </div>
</div>

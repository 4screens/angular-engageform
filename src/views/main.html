<link rel="stylesheet" type="text/css" data-ng-href="{{ customThemeCssFile || staticThemeCssFile }}" data-ng-if="!!customThemeCssFile || !!staticThemeCssFile" />

<div id="four-screens-application" class="{{screenType}}">
  <div class="theme-background-image-file-wrapper theme-background-brightness theme-background-color">
    <picture data-ng-if="quiz.theme.backgroundImageFile" class="position-{{quiz.theme.backgroundImagePosition}}">
      <source 
        media="(min-width: 1021px)" 
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <source 
        media="(min-width: 769px)" 
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1020, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1020, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1020, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <source 
        media="(min-width: 481px)" 
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 768, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 768, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 768, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <source 
        media="(min-width: 0px)" 
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 480, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 480, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 480, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
      <img 
        data-ng-src="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.0', quiz.theme.backgroundImageBlur ) }}" 
        data-ng-srcset="{{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.0', quiz.theme.backgroundImageBlur ) }},
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '1.5', quiz.theme.backgroundImageBlur ) }} 1.5x,
                        {{ getBgImgUrl( quiz.theme.backgroundImageFile, 1920, '2.0', quiz.theme.backgroundImageBlur ) }} 2.0x"
      >
    </picture>
  </div>
  <div class="four-screens__embed-container theme-main-font" data-ng-class="wayAnimateClass">
    <div data-ng-repeat="question in questions" class=" questionnaire animate-if" data-ng-if="$index == currentQuestion.index()">
      <div class="question-content-wrapper">
        <div class="four-screens__content wrapper" data-ng-class="{'content__type--forms': question.type == 'forms', 'content__type--info-page': question.type == 'infoPage' , 'content__type--multi-choice': question.type == 'multiChoice', 'content__type--picture-choise': question.type == 'pictureChoice' , 'content__type--rate-it': question.type == 'rateIt' }" data-ng-include="'views/engageform/question-' + question.type + '.html'">
        </div>
      </div>
    </div>
    <div class="message-box message-box__require theme-button-color theme-question-color" data-ng-class="{'is-active': !!requiredMessage }" >
      {{requiredMessage}}
    </div>
    <div class="four-screens__footer">
      <div class="progress" data-ng-if="currentQuestion.index() > -1">
        <span class="progress__bar">
          <span class="progress__bar--line theme-button-color" data-ng-class="{'progress__bar--full-size': (((currentQuestion.index() + 1)  / questions.length )*100) == 100 }" style="width: {{( (currentQuestion.index() + 1)  / questions.length )*100 | number:0 }}%">
        </span>
      </div>
      <div class="progress__numbering" >
        ({{ currentQuestion.index() + 1 }} of {{ questions.length }})
      </div>
      <a title="4Screens" href="http://4screens.net/" class="four-screens__footer-logo" target="_blank">4Screens</a>

      <button class="progress__btn progress__btn--prev" data-ng-show="hasPrev() && quiz.settings.allowQuestionNavigation" data-ng-click="prev()">
        <span><i class="fa fa-chevron-left"></i></span>
      </button>

      <button class="progress__btn progress__btn--next theme-button-color theme-question-color" data-ng-show="hasNext()" data-ng-click="next($event)">
        <span>NEXT <i class="fa fa-chevron-right"></i></span>
      </button>

      <button class="progress__btn progress__btn--next theme-button-color theme-question-color" data-ng-show="!hasNext()" data-ng-click="submitQuiz()">
        <span>SUBMIT <i class="fa fa-check"></i></span>
      </button>
    </div>
  </div>
</div>

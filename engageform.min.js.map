{"version":3,"sources":["/source/app.ts","/source/engageform/engageform.ts","engageform.js","/source/navigation/navigation.ts","/source/page/page.ts","/source/user/user.ts","/source/bootstrap.ts","/source/engageform/enum.ts","/source/engageform/settings.ts","/source/engageform/theme.ts","/source/engageform/type/outcome.ts","/source/engageform/type/poll.ts","/source/engageform/type/score.ts","/source/engageform/type/survey.ts","/source/page/case.ts","/source/page/enum.ts","/source/page/settings.ts","/source/page/case/image.ts","/source/page/case/input.ts","/source/page/case/iteration.ts","/source/page/case/text.ts","/source/page/type/endpage.ts","/source/page/type/form.ts","/source/page/type/multichoice.ts","/source/page/type/picturechoice.ts","/source/page/type/rateit.ts","/source/page/type/startpage.ts"],"names":["app","angular","module","Engageform","_Engageform","Engageform.Engageform","Engageform.Engageform.constructor","get","Engageform.Engageform.pages","enumerable","configurable","Engageform.Engageform.startPages","Engageform.Engageform.endPages","Engageform.Engageform.availablePages","Engageform.Engageform.initPages","Engageform.Engageform.setCurrent","Engageform.Engageform.setCurrentEndPage","indexOf","res","status","Bootstrap","localStorage","clearAll","user","id","data","globalUserIdent","this","$q","reject","Engageform.Engageform.getById","Engageform.Engageform.getPagesById","Navigation","_Navigation","Navigation.Navigation","Navigation.Navigation.constructor","Navigation.Navigation.start","Navigation.Navigation.prev","Navigation.Navigation.pick","Navigation.Navigation.move","Navigation.Navigation.disableDefaultAction","Page","_Page","Page.Page","Page.Page.constructor","Page.Page.id","Page.Page.engageform","Page.Page.Type","Page.Page.CaseType","Page.Page.send","Page.Page.sent","Page.Page.getMediaUrl","User","User.id","set","User.sessionId","Bootstrap.constructor","Bootstrap.type","Bootstrap.Type","Bootstrap.mode","Bootstrap.Mode","Bootstrap.title","Bootstrap.settings","Bootstrap.theme","Bootstrap.current","Bootstrap.navigation","Bootstrap.message","Bootstrap.init","engageform","navigation","$inject","service","Engageform.Type","Engageform.Mode","Engageform.Settings","Engageform.Settings.constructor","Engageform.Theme","Engageform.Theme.constructor","__extends","d","b","__","constructor","p","hasOwnProperty","prototype","Engageform.Outcome","Engageform.Outcome.constructor","Engageform.Outcome.setCurrentEndPage","Engageform.Poll","Engageform.Poll.constructor","Engageform.Poll.setCurrentEndPage","Engageform.Score","Engageform.Score.constructor","Engageform.Score.setCurrentEndPage","Engageform.Survey","Engageform.Survey.constructor","Engageform.Survey.setCurrentEndPage","Page.Case","Page.Case.constructor","Page.Case.id","Page.Case.page","Page.Case.send","Page.Case.makeSend","Page.Case.load","Page.Case.save","Page.Case.validate","Page.CaseType","Page.Type","Page.Settings","Page.Settings.constructor","Page.ImageCase","Page.ImageCase.constructor","Page.ImageCase.send","Page.InputCase","Page.InputCase.constructor","Page.InputCase.send","Page.InputCase.validate","Page.IterationCase","Page.IterationCase.constructor","Page.IterationCase.send","Page.TextCase","Page.TextCase.constructor","Page.TextCase.send","Page.EndPage","Page.EndPage.constructor","Page.Form","Page.Form.constructor","Page.Form.send","Page.Form.selectAnswer","Page.MultiChoice","Page.MultiChoice.constructor","Page.MultiChoice.selectAnswer","Page.PictureChoice","Page.PictureChoice.constructor","Page.PictureChoice.selectAnswer","Page.Rateit","Page.Rateit.constructor","Page.Rateit.selectAnswer","Page.StartPage","Page.StartPage.constructor"],"mappings":"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","file":"engageform.min.js","sourcesContent":["/// <reference path=\"../typings/tsd.d.ts\" />\n\nvar app = angular.module('4screens.engageform', [\n  'LocalStorageModule'\n]);\n","/// <reference path=\"iengageform.ts\" />\n\nmodule Engageform {\n  export class Engageform implements IEngageform {\n    private _engageformId: string;\n    private _pages: Page.IPages = {};\n\n    private _startPages: string[] = [];\n    private _endPages: string[] = [];\n    private _availablePages: string[] = [];\n\n    type: Type = Type.Undefined;\n    title;\n    message;\n    settings;\n    theme;\n\n    current: Page.IPage;\n    navigation: Navigation.INavigation;\n\n    get pages(): Page.IPages {\n      return this._pages;\n    }\n\n    get startPages(): string[] {\n      return this._startPages;\n    }\n\n    get endPages(): string[] {\n      return this._endPages;\n    }\n\n    get availablePages(): string[] {\n      return this._availablePages;\n    }\n\n    constructor(data: API.IQuiz) {\n      this._engageformId = data._id;\n\n      this.title = data.title;\n      this.settings = new Settings(data);\n      this.theme = new Theme(data);\n    }\n\n    initPages(): ng.IPromise<IEngageform> {\n      return this.getPagesById(this._engageformId).then((pages) => {\n        pages.map((page) => {\n          switch (page.type) {\n            case 'multiChoice':\n              this._availablePages.push(page._id);\n              this._pages[page._id] = new Page.MultiChoice(<IEngageform>this, page);\n              break;\n            case 'pictureChoice':\n              this._availablePages.push(page._id);\n              this._pages[page._id] = new Page.PictureChoice(<IEngageform>this, page);\n              break;\n            case 'rateIt':\n              this._availablePages.push(page._id);\n              this._pages[page._id] = new Page.Rateit(<IEngageform>this, page);\n              break;\n            case 'forms':\n              this._availablePages.push(page._id);\n              this._pages[page._id] = new Page.Form(<IEngageform>this, page);\n              break;\n            case 'startPage':\n              this._startPages.push(page._id);\n              this._pages[page._id] = new Page.StartPage(<IEngageform>this, page);\n              break;\n            case 'endPage':\n              this._endPages.push(page._id);\n              this._pages[page._id] = new Page.EndPage(<IEngageform>this, page);\n              break;\n          }\n        });\n\n        return <IEngageform>this;\n      });\n    }\n\n    setCurrent(pageId: string) {\n      this.current = this._pages[pageId];\n    }\n\n    setCurrentEndPage(): ng.IPromise<API.IQuizFinish> {\n      var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.engageformFinishUrl;\n          url = url.replace(':engageformId', this._engageformId);\n\n      if (Bootstrap.mode !== Mode.Default) {\n        url += '?preview';\n      }\n\n      return Bootstrap.$http.post(url, {\n        userIdent: Bootstrap.user.sessionId,\n        globalUserIdent: Bootstrap.user.id\n      }).then(function (res: API.IQuizFinishResponse) {\n        if ([200, 304].indexOf(res.status) !== -1) {\n          Bootstrap.localStorage.clearAll();\n          Bootstrap.user.id = res.data.globalUserIdent;\n          return res.data;\n        }\n\n        this.$q.reject(res);\n      });\n    }\n\n    static getById(id: string): ng.IPromise<API.IQuiz> {\n      var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.engageformUrl;\n      url = url.replace(':engageformId', id);\n\n      if (Bootstrap.mode !== Mode.Default) {\n        url += '?preview';\n      }\n\n      return Bootstrap.$http.get(url).then((res: API.IQuizResponse) => {\n        if ([200, 304].indexOf(res.status) !== -1) {\n          return res.data;\n        }\n\n        return Bootstrap.$q.reject(res);\n      });\n    }\n\n    private getPagesById(engageformId: string): ng.IPromise<API.IQuizQuestion[]> {\n      var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.engageformPagesUrl;\n          url = url.replace(':engageformId', this._engageformId);\n\n      if (Bootstrap.mode !== Mode.Default) {\n        url += '?preview';\n      }\n\n      return Bootstrap.$http.get(url.replace(':engageformId', engageformId)).then(function (res) {\n        if ([200, 304].indexOf(res.status) !== -1) {\n          return res.data;\n        }\n\n        this.$q.reject(res);\n      });\n    }\n  }\n}\n","/*!\n * 4screens-angular-engageform v0.2.1\n * (c) 2015 Nopattern sp. z o.o.\n * License: proprietary\n */\n\n/// <reference path=\"../typings/tsd.d.ts\" />\nvar app = angular.module('4screens.engageform', [\n    'LocalStorageModule'\n]);\n\n/// <reference path=\"iengageform.ts\" />\nvar Engageform;\n(function (_Engageform) {\n    var Engageform = (function () {\n        function Engageform(data) {\n            this._pages = {};\n            this._startPages = [];\n            this._endPages = [];\n            this._availablePages = [];\n            this.type = 0 /* Undefined */;\n            this._engageformId = data._id;\n            this.title = data.title;\n            this.settings = new _Engageform.Settings(data);\n            this.theme = new _Engageform.Theme(data);\n        }\n        Object.defineProperty(Engageform.prototype, \"pages\", {\n            get: function () {\n                return this._pages;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Engageform.prototype, \"startPages\", {\n            get: function () {\n                return this._startPages;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Engageform.prototype, \"endPages\", {\n            get: function () {\n                return this._endPages;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Engageform.prototype, \"availablePages\", {\n            get: function () {\n                return this._availablePages;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Engageform.prototype.initPages = function () {\n            var _this = this;\n            return this.getPagesById(this._engageformId).then(function (pages) {\n                pages.map(function (page) {\n                    switch (page.type) {\n                        case 'multiChoice':\n                            _this._availablePages.push(page._id);\n                            _this._pages[page._id] = new Page.MultiChoice(_this, page);\n                            break;\n                        case 'pictureChoice':\n                            _this._availablePages.push(page._id);\n                            _this._pages[page._id] = new Page.PictureChoice(_this, page);\n                            break;\n                        case 'rateIt':\n                            _this._availablePages.push(page._id);\n                            _this._pages[page._id] = new Page.Rateit(_this, page);\n                            break;\n                        case 'forms':\n                            _this._availablePages.push(page._id);\n                            _this._pages[page._id] = new Page.Form(_this, page);\n                            break;\n                        case 'startPage':\n                            _this._startPages.push(page._id);\n                            _this._pages[page._id] = new Page.StartPage(_this, page);\n                            break;\n                        case 'endPage':\n                            _this._endPages.push(page._id);\n                            _this._pages[page._id] = new Page.EndPage(_this, page);\n                            break;\n                    }\n                });\n                return _this;\n            });\n        };\n        Engageform.prototype.setCurrent = function (pageId) {\n            this.current = this._pages[pageId];\n        };\n        Engageform.prototype.setCurrentEndPage = function () {\n            var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.engageformFinishUrl;\n            url = url.replace(':engageformId', this._engageformId);\n            if (Bootstrap.mode !== 1 /* Default */) {\n                url += '?preview';\n            }\n            return Bootstrap.$http.post(url, {\n                userIdent: Bootstrap.user.sessionId,\n                globalUserIdent: Bootstrap.user.id\n            }).then(function (res) {\n                if ([200, 304].indexOf(res.status) !== -1) {\n                    Bootstrap.localStorage.clearAll();\n                    Bootstrap.user.id = res.data.globalUserIdent;\n                    return res.data;\n                }\n                this.$q.reject(res);\n            });\n        };\n        Engageform.getById = function (id) {\n            var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.engageformUrl;\n            url = url.replace(':engageformId', id);\n            if (Bootstrap.mode !== 1 /* Default */) {\n                url += '?preview';\n            }\n            return Bootstrap.$http.get(url).then(function (res) {\n                if ([200, 304].indexOf(res.status) !== -1) {\n                    return res.data;\n                }\n                return Bootstrap.$q.reject(res);\n            });\n        };\n        Engageform.prototype.getPagesById = function (engageformId) {\n            var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.engageformPagesUrl;\n            url = url.replace(':engageformId', this._engageformId);\n            if (Bootstrap.mode !== 1 /* Default */) {\n                url += '?preview';\n            }\n            return Bootstrap.$http.get(url.replace(':engageformId', engageformId)).then(function (res) {\n                if ([200, 304].indexOf(res.status) !== -1) {\n                    return res.data;\n                }\n                this.$q.reject(res);\n            });\n        };\n        return Engageform;\n    })();\n    _Engageform.Engageform = Engageform;\n})(Engageform || (Engageform = {}));\n\n/// <reference path=\"inavigation.ts\" />\nvar Navigation;\n(function (_Navigation) {\n    var Navigation = (function () {\n        function Navigation(engageform) {\n            this.enabled = false;\n            this.position = 0;\n            this.size = 0;\n            this.hasStart = false;\n            this.enabledStart = true;\n            this.hasPrev = false;\n            this.enabledPrev = true;\n            this.hasNext = false;\n            this.enabledNext = true;\n            this.hasFinish = false;\n            this.enabledFinish = true;\n            this.next = this.pick;\n            this.finish = this.pick;\n            this._engageform = engageform;\n            this.size = engageform.availablePages.length;\n            if (this._engageform.startPages.length > 0) {\n                this.hasStart = true;\n                this._engageform.setCurrent(this._engageform.startPages[0]);\n            }\n            else {\n                this.enabled = true;\n                this.move(null);\n                this.hasPrev = false;\n            }\n        }\n        Navigation.prototype.start = function ($event) {\n            this.disableDefaultAction($event);\n            this.enabled = true;\n            this.hasStart = false;\n            this.move(null);\n            this.hasPrev = false;\n        };\n        Navigation.prototype.prev = function ($event) {\n            this.disableDefaultAction($event);\n            if (this._engageform.current) {\n                this._engageform.message = '';\n            }\n            this.position--;\n            this._engageform.setCurrent(this._engageform.availablePages[this.position - 1]);\n            this.hasPrev = false;\n            this.hasNext = true;\n            this.hasFinish = false;\n            if (this.position > 1) {\n                this.hasPrev = true;\n            }\n        };\n        Navigation.prototype.pick = function ($event, vcase) {\n            var _this = this;\n            this.disableDefaultAction($event);\n            switch (Bootstrap.mode) {\n                default:\n                    this._engageform.current.send(vcase).then(function () {\n                        _this.move(vcase);\n                    }).catch(function (errorMessage) {\n                        _this._engageform.message = errorMessage;\n                    });\n            }\n        };\n        Navigation.prototype.move = function (vcase) {\n            this._engageform.message = '';\n            if (this._engageform.current) {\n                switch (Bootstrap.mode) {\n                    case 1 /* Default */:\n                    case 2 /* Preview */:\n                        if (!this._engageform.current.filled && this._engageform.current.settings.requiredAnswer) {\n                            this._engageform.message = 'Answer is required to proceed to next question';\n                            return;\n                        }\n                        break;\n                }\n            }\n            this.position++;\n            if (this._engageform.availablePages.length >= this.position) {\n                this._engageform.setCurrent(this._engageform.availablePages[this.position - 1]);\n                this.hasPrev = true;\n                this.hasNext = false;\n                this.hasFinish = false;\n                if (this._engageform.availablePages.length > this.position) {\n                    this.hasNext = true;\n                }\n                else if (this._engageform.availablePages.length === this.position) {\n                    this.hasFinish = true;\n                }\n            }\n            else {\n                this.position = this._engageform.availablePages.length;\n                if (!vcase) {\n                    this._engageform.setCurrentEndPage();\n                    this.enabled = false;\n                    this.hasPrev = false;\n                    this.hasNext = false;\n                    this.hasFinish = false;\n                }\n            }\n        };\n        Navigation.prototype.disableDefaultAction = function ($event) {\n            if ($event) {\n                $event.stopPropagation();\n                $event.preventDefault();\n            }\n        };\n        return Navigation;\n    })();\n    _Navigation.Navigation = Navigation;\n})(Navigation || (Navigation = {}));\n\n/// <reference path=\"ipage.ts\" />\n/// <reference path=\"ipages.ts\" />\n/// <reference path=\"ipagesent.ts\" />\nvar Page;\n(function (_Page) {\n    var Page = (function () {\n        function Page(engageform, data) {\n            this.cases = [];\n            this._pageId = data._id;\n            this._engageform = engageform;\n            this.title = data.text;\n            this.description = data.description;\n            this.media = this.getMediaUrl(data.imageData, data.imageFile);\n            this.settings = new _Page.Settings(data);\n        }\n        Object.defineProperty(Page.prototype, \"id\", {\n            get: function () {\n                return this._pageId;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Page.prototype, \"engageform\", {\n            get: function () {\n                return this._engageform;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Page.prototype, \"Type\", {\n            get: function () {\n                return _Page.Type;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Page.prototype, \"CaseType\", {\n            get: function () {\n                return _Page.CaseType;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Page.prototype.send = function (vcase) {\n            if (vcase) {\n                return vcase.send();\n            }\n            var deferred = Bootstrap.$q.defer();\n            deferred.resolve();\n            return deferred.promise;\n        };\n        Page.prototype.sent = function () {\n            var deferred = Bootstrap.$q.defer();\n            var sent = {};\n            switch (Bootstrap.mode) {\n                default:\n                    sent = (Bootstrap.localStorage.get('page.' + this.id) || {});\n                    break;\n            }\n            deferred.resolve(sent);\n            return deferred.promise;\n        };\n        Page.prototype.selectAnswer = function (data) {\n            // \"abstract\"\n        };\n        Page.prototype.getMediaUrl = function (imageData, imageFile) {\n            if (!imageFile) {\n                return '';\n            }\n            if (imageFile.indexOf('http') === -1) {\n                imageFile = Bootstrap.config.backend.api + '/uploads/' + imageFile;\n            }\n            return imageFile;\n        };\n        return Page;\n    })();\n    _Page.Page = Page;\n})(Page || (Page = {}));\n\n/// <reference path=\"iuser.ts\" />\nvar User = (function () {\n    function User() {\n    }\n    Object.defineProperty(User.prototype, \"id\", {\n        get: function () {\n            if (!this._id) {\n                this._id = Bootstrap.localStorage.get('userIdent');\n            }\n            return this._id;\n        },\n        set: function (id) {\n            Bootstrap.localStorage.set('userIdent', id);\n            this._id = id;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(User.prototype, \"sessionId\", {\n        get: function () {\n            if (!this._sessionId) {\n                this._sessionId = Bootstrap.localStorage.get('sessionIdent');\n            }\n            return this._sessionId;\n        },\n        set: function (sessionId) {\n            Bootstrap.localStorage.set('sessionIdent', sessionId);\n            this._sessionId = sessionId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return User;\n})();\n\n/// <reference path=\"api/api.ts\" />\n/// <reference path=\"engageform/engageform.ts\" />\n/// <reference path=\"navigation/navigation.ts\" />\n/// <reference path=\"page/page.ts\" />\n/// <reference path=\"user/user.ts\" />\nvar Bootstrap = (function () {\n    function Bootstrap($http, $q, localStorage, ApiConfig) {\n        Bootstrap.$http = $http;\n        Bootstrap.$q = $q;\n        Bootstrap.localStorage = localStorage;\n        Bootstrap.config = ApiConfig;\n        Bootstrap.user = new User();\n    }\n    Object.defineProperty(Bootstrap.prototype, \"type\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.type;\n            }\n            return 0 /* Undefined */;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"Type\", {\n        get: function () {\n            return Engageform.Type;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"mode\", {\n        get: function () {\n            return Bootstrap.mode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"Mode\", {\n        get: function () {\n            return Engageform.Mode;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"title\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.title;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"settings\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.settings;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"theme\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.theme;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"current\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.current;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"navigation\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.navigation;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Bootstrap.prototype, \"message\", {\n        get: function () {\n            if (this._engageform) {\n                return this._engageform.message;\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Bootstrap.prototype.init = function (opts) {\n        var _this = this;\n        switch (opts.mode) {\n            case 'preview':\n                Bootstrap.mode = 2 /* Preview */;\n                break;\n            case 'summary':\n                Bootstrap.mode = 4 /* Summary */;\n                break;\n            case 'result':\n                Bootstrap.mode = 3 /* Result */;\n                break;\n            default:\n                Bootstrap.mode = 1 /* Default */;\n        }\n        return Engageform.Engageform.getById(opts.id).then(function (engageform) {\n            switch (engageform.type) {\n                case 'outcome':\n                    _this._engageform = new Engageform.Outcome(engageform);\n                    break;\n                case 'poll':\n                    _this._engageform = new Engageform.Poll(engageform);\n                    break;\n                case 'score':\n                    _this._engageform = new Engageform.Score(engageform);\n                    break;\n                case 'survey':\n                    _this._engageform = new Engageform.Survey(engageform);\n                    break;\n            }\n            return _this._engageform.initPages();\n        }).then(function (engageform) {\n            engageform.navigation = new Navigation.Navigation(engageform);\n            return engageform;\n        });\n    };\n    Bootstrap.mode = 0 /* Undefined */;\n    return Bootstrap;\n})();\nBootstrap.$inject = ['$http', '$q', 'localStorageService', 'ApiConfig'];\napp.service('Engageform', Bootstrap);\n\nvar Engageform;\n(function (Engageform) {\n    (function (Type) {\n        Type[Type[\"Undefined\"] = 0] = \"Undefined\";\n        Type[Type[\"Live\"] = 1] = \"Live\";\n        Type[Type[\"Outcome\"] = 2] = \"Outcome\";\n        Type[Type[\"Poll\"] = 3] = \"Poll\";\n        Type[Type[\"Score\"] = 4] = \"Score\";\n        Type[Type[\"Survey\"] = 5] = \"Survey\";\n    })(Engageform.Type || (Engageform.Type = {}));\n    var Type = Engageform.Type;\n    (function (Mode) {\n        Mode[Mode[\"Undefined\"] = 0] = \"Undefined\";\n        Mode[Mode[\"Default\"] = 1] = \"Default\";\n        Mode[Mode[\"Preview\"] = 2] = \"Preview\";\n        Mode[Mode[\"Result\"] = 3] = \"Result\";\n        Mode[Mode[\"Summary\"] = 4] = \"Summary\";\n    })(Engageform.Mode || (Engageform.Mode = {}));\n    var Mode = Engageform.Mode;\n})(Engageform || (Engageform = {}));\n\n/// <reference path=\"isettings.ts\" />\nvar Engageform;\n(function (Engageform) {\n    var Settings = (function () {\n        function Settings(data) {\n            this.allowAnswerChange = false;\n            if (data.settings) {\n                this.allowAnswerChange = !!data.settings.allowAnswerChange;\n            }\n        }\n        return Settings;\n    })();\n    Engageform.Settings = Settings;\n})(Engageform || (Engageform = {}));\n\n/// <reference path=\"itheme.ts\" />\nvar Engageform;\n(function (Engageform) {\n    var Theme = (function () {\n        function Theme(data) {\n            this.answerBackgroundColor = '';\n            this.answerBorderColor = '';\n            this.answerColor = '';\n            this.backgroundBrightness = '';\n            this.backgroundColor = '';\n            this.backgroundImageBlur = '';\n            this.backgroundImageFile = '';\n            this.backgroundImagePosition = '';\n            this.buttonColor = '';\n            this.font = '';\n            this.questionColor = '';\n            this.customThemeCssFile = '';\n            if (data.theme) {\n                this.answerBackgroundColor = data.theme.answerBackgroundColor || '';\n                this.answerBorderColor = data.theme.answerBorderColor || '';\n                this.answerColor = data.theme.answerColor || '';\n                this.backgroundBrightness = data.theme.backgroundBrightness || '';\n                this.backgroundColor = data.theme.backgroundColor || '';\n                this.backgroundImageBlur = data.theme.backgroundImageBlur || '';\n                this.backgroundImageFile = data.theme.backgroundImageFile || '';\n                this.backgroundImagePosition = data.theme.backgroundImagePosition || '';\n                this.buttonColor = data.theme.buttonColor || '';\n                this.font = data.theme.font || '';\n                this.questionColor = data.theme.questionColor || '';\n                if (data.theme.customThemeCssFile) {\n                    this.customThemeCssFile = Bootstrap.config.backend.api + '/uploads/' + data.theme.customThemeCssFile;\n                }\n            }\n        }\n        return Theme;\n    })();\n    Engageform.Theme = Theme;\n})(Engageform || (Engageform = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Engageform;\n(function (Engageform) {\n    var Outcome = (function (_super) {\n        __extends(Outcome, _super);\n        function Outcome() {\n            _super.apply(this, arguments);\n            this.type = 2 /* Outcome */;\n        }\n        Outcome.prototype.setCurrentEndPage = function () {\n            var _this = this;\n            return _super.prototype.setCurrentEndPage.call(this).then(function (data) {\n                var hasEndPage = false;\n                _this.endPages.map(function (pageId) {\n                    if (_this.pages[pageId].outcome === data.outcome) {\n                        hasEndPage = true;\n                        _this.setCurrent(pageId);\n                    }\n                });\n                if (!hasEndPage) {\n                    _this.message = 'Thank you!';\n                }\n                return data;\n            });\n        };\n        return Outcome;\n    })(Engageform.Engageform);\n    Engageform.Outcome = Outcome;\n})(Engageform || (Engageform = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Engageform;\n(function (Engageform) {\n    var Poll = (function (_super) {\n        __extends(Poll, _super);\n        function Poll() {\n            _super.apply(this, arguments);\n            this.type = 3 /* Poll */;\n        }\n        Poll.prototype.setCurrentEndPage = function () {\n            var _this = this;\n            return _super.prototype.setCurrentEndPage.call(this).then(function (data) {\n                if (_this.endPages.length) {\n                    _this.setCurrent(_this.endPages[0]);\n                }\n                else {\n                    _this.message = 'Thank you!';\n                }\n                return data;\n            });\n        };\n        return Poll;\n    })(Engageform.Engageform);\n    Engageform.Poll = Poll;\n})(Engageform || (Engageform = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Engageform;\n(function (Engageform) {\n    var Score = (function (_super) {\n        __extends(Score, _super);\n        function Score() {\n            _super.apply(this, arguments);\n            this.type = 4 /* Score */;\n        }\n        Score.prototype.setCurrentEndPage = function () {\n            var _this = this;\n            return _super.prototype.setCurrentEndPage.call(this).then(function (data) {\n                var score = Math.round(data.totalScore / data.maxScore * 100);\n                var hasEndPage = false;\n                _this.endPages.map(function (pageId) {\n                    if (_this.pages[pageId].rangeMin <= score && _this.pages[pageId].rangeMax >= score) {\n                        hasEndPage = true;\n                        _this.pages[pageId].score = score;\n                        _this.setCurrent(pageId);\n                    }\n                });\n                if (!hasEndPage) {\n                    _this.message = 'Thank you!';\n                }\n                return data;\n            });\n        };\n        return Score;\n    })(Engageform.Engageform);\n    Engageform.Score = Score;\n})(Engageform || (Engageform = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Engageform;\n(function (Engageform) {\n    var Survey = (function (_super) {\n        __extends(Survey, _super);\n        function Survey() {\n            _super.apply(this, arguments);\n            this.type = 5 /* Survey */;\n        }\n        Survey.prototype.setCurrentEndPage = function () {\n            var _this = this;\n            return _super.prototype.setCurrentEndPage.call(this).then(function (data) {\n                if (_this.endPages.length) {\n                    _this.setCurrent(_this.endPages[0]);\n                }\n                else {\n                    _this.message = 'Thank you!';\n                }\n                return data;\n            });\n        };\n        return Survey;\n    })(Engageform.Engageform);\n    Engageform.Survey = Survey;\n})(Engageform || (Engageform = {}));\n\n/// <reference path=\"icase.ts\" />\nvar Page;\n(function (Page) {\n    var Case = (function () {\n        function Case(page, data) {\n            this.type = 0 /* Undefined */;\n            this._caseId = data._id;\n            this._page = page;\n        }\n        Object.defineProperty(Case.prototype, \"id\", {\n            get: function () {\n                return this._caseId;\n            },\n            set: function (caseId) {\n                this._caseId = caseId;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(Case.prototype, \"page\", {\n            get: function () {\n                return this._page;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Case.prototype.send = function () {\n            var deferred = Bootstrap.$q.defer();\n            deferred.resolve({});\n            return deferred.promise;\n        };\n        Case.prototype.makeSend = function (data) {\n            var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.pageResponseUrl;\n            url = url.replace(':pageId', this.page.id);\n            if (Bootstrap.mode !== 1 /* Default */) {\n                url += '?preview';\n            }\n            data.quizQuestionId = this.page.id;\n            data.userIdent = Bootstrap.user.sessionId;\n            return Bootstrap.$http.post(url, data).then(function (res) {\n                if ([200, 304].indexOf(res.status) !== -1) {\n                    if (!data.userIdent) {\n                        Bootstrap.user.sessionId = res.data.userIdent;\n                    }\n                    return res.data;\n                }\n                return Bootstrap.$q.reject(res);\n            });\n        };\n        Case.prototype.load = function () {\n            return Bootstrap.localStorage.get('page.' + this.page.id) || {};\n        };\n        Case.prototype.save = function (data) {\n            Bootstrap.localStorage.set('page.' + this.page.id, data);\n        };\n        Case.prototype.validate = function () {\n            // \"abstract\"\n            return true;\n        };\n        return Case;\n    })();\n    Page.Case = Case;\n})(Page || (Page = {}));\n\nvar Page;\n(function (Page) {\n    (function (CaseType) {\n        CaseType[CaseType[\"Undefined\"] = 0] = \"Undefined\";\n        CaseType[CaseType[\"Image\"] = 1] = \"Image\";\n        CaseType[CaseType[\"Input\"] = 2] = \"Input\";\n        CaseType[CaseType[\"Iteration\"] = 3] = \"Iteration\";\n        CaseType[CaseType[\"Text\"] = 4] = \"Text\";\n    })(Page.CaseType || (Page.CaseType = {}));\n    var CaseType = Page.CaseType;\n    (function (Type) {\n        Type[Type[\"Undefined\"] = 0] = \"Undefined\";\n        Type[Type[\"EndPage\"] = 1] = \"EndPage\";\n        Type[Type[\"Form\"] = 2] = \"Form\";\n        Type[Type[\"MultiChoice\"] = 3] = \"MultiChoice\";\n        Type[Type[\"PictureChoice\"] = 4] = \"PictureChoice\";\n        Type[Type[\"Rateit\"] = 5] = \"Rateit\";\n        Type[Type[\"StartPage\"] = 6] = \"StartPage\";\n    })(Page.Type || (Page.Type = {}));\n    var Type = Page.Type;\n})(Page || (Page = {}));\n\n/// <reference path=\"isettings.ts\" />\nvar Page;\n(function (Page) {\n    var Settings = (function () {\n        function Settings(data) {\n            this.showAnswers = false;\n            this.showCorrectAnswer = false;\n            this.showMainMedia = false;\n            this.showDescription = false;\n            this.requiredAnswer = false;\n            this.requiredAnswer = !!data.requiredAnswer;\n            if (data.settings) {\n                this.showAnswers = !!data.settings.showAnswers;\n                this.showCorrectAnswer = !!data.settings.showCorrectAnswer;\n                this.showMainMedia = !!data.settings.showMainMedia;\n                this.showDescription = !!data.settings.showDescription;\n            }\n        }\n        return Settings;\n    })();\n    Page.Settings = Settings;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var ImageCase = (function (_super) {\n        __extends(ImageCase, _super);\n        function ImageCase(page, data) {\n            _super.call(this, page, data);\n            this.type = 1 /* Image */;\n            this.selected = false;\n            this.correct = false;\n            this.incorrect = false;\n            this.title = data.text;\n            this.image = data.imageFile;\n        }\n        ImageCase.prototype.send = function () {\n            var _this = this;\n            if (!this.page.engageform.settings.allowAnswerChange && this.page.filled) {\n                return Bootstrap.$q.reject('Changing answer is not allowed');\n            }\n            return _super.prototype.makeSend.call(this, { selectedAnswerId: this.id }).then(function (res) {\n                var data = {};\n                if (res.selectedAnswerId) {\n                    data.selectedCaseId = res.selectedAnswerId;\n                }\n                if (res.correctAnswerId) {\n                    data.correctCaseId = res.correctAnswerId;\n                }\n                _super.prototype.save.call(_this, data);\n                _this.page.selectAnswer(data);\n                return data;\n            });\n        };\n        return ImageCase;\n    })(Page.Case);\n    Page.ImageCase = ImageCase;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var InputCase = (function (_super) {\n        __extends(InputCase, _super);\n        function InputCase(page, data) {\n            _super.call(this, page, data);\n            this.type = 2 /* Input */;\n            this.title = data.text;\n            this.expectedValue = data.type;\n            this.value = '';\n        }\n        InputCase.prototype.send = function () {\n            var data = {};\n            data.inputs = [];\n            var sent = this.load();\n            for (var sentId in sent) {\n                if (sent.hasOwnProperty(sentId)) {\n                    data.inputs.push({\n                        _id: sentId,\n                        value: sent[sentId]\n                    });\n                }\n            }\n            return _super.prototype.makeSend.call(this, data).then(function () {\n                return data;\n            });\n        };\n        InputCase.prototype.validate = function () {\n            this.correct = false;\n            this.incorrect = false;\n            if (this.page.settings.requiredAnswer && !this.value) {\n                this.error = 'Answer is required';\n                this.incorrect = true;\n            }\n            else {\n                this.error = '';\n                this.correct = true;\n            }\n            if (this.correct) {\n                var sent = this.load();\n                sent[this.id] = this.value;\n                this.save(sent);\n                return true;\n            }\n            return false;\n        };\n        return InputCase;\n    })(Page.Case);\n    Page.InputCase = InputCase;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var IterationCase = (function (_super) {\n        __extends(IterationCase, _super);\n        function IterationCase(page, data) {\n            _super.call(this, page, data);\n            this.type = 3 /* Iteration */;\n            this.selected = false;\n            this.ordinal = data.ordinal;\n            this.symbol = data.symbol;\n        }\n        IterationCase.prototype.send = function () {\n            var _this = this;\n            if (!this.page.engageform.settings.allowAnswerChange && this.page.filled) {\n                return Bootstrap.$q.reject('Changing answer is not allowed');\n            }\n            return _super.prototype.makeSend.call(this, { quizQuestionId: this.page.id, rateItValue: this.ordinal }).then(function (res) {\n                var data = {};\n                if (res.selectedValue) {\n                    data.selectedValue = res.selectedValue;\n                }\n                if (res.avgRateItValue) {\n                    data.result = +res.avgRateItValue;\n                }\n                _super.prototype.save.call(_this, data);\n                _this.page.selectAnswer(data);\n                return data;\n            });\n        };\n        return IterationCase;\n    })(Page.Case);\n    Page.IterationCase = IterationCase;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var TextCase = (function (_super) {\n        __extends(TextCase, _super);\n        function TextCase(page, data) {\n            _super.call(this, page, data);\n            this.type = 4 /* Text */;\n            this.selected = false;\n            this.correct = false;\n            this.incorrect = false;\n            this.title = data.text;\n        }\n        TextCase.prototype.send = function () {\n            var _this = this;\n            if (!this.page.engageform.settings.allowAnswerChange && this.page.filled) {\n                return Bootstrap.$q.reject('Changing answer is not allowed');\n            }\n            return _super.prototype.makeSend.call(this, { selectedAnswerId: this.id }).then(function (res) {\n                var data = {};\n                if (res.selectedAnswerId) {\n                    data.selectedCaseId = res.selectedAnswerId;\n                }\n                if (res.correctAnswerId) {\n                    data.correctCaseId = res.correctAnswerId;\n                }\n                for (var caseId in res.stats) {\n                    if (res.stats.hasOwnProperty(caseId)) {\n                        data.results = data.results || {};\n                        if (/.{24}/.test(caseId)) {\n                            data.results[caseId] = res.stats[caseId];\n                        }\n                    }\n                }\n                _super.prototype.save.call(_this, data);\n                _this.page.selectAnswer(data);\n                return data;\n            });\n        };\n        return TextCase;\n    })(Page.Case);\n    Page.TextCase = TextCase;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var EndPage = (function (_super) {\n        __extends(EndPage, _super);\n        function EndPage(engageform, data) {\n            _super.call(this, engageform, data);\n            this.type = 1 /* EndPage */;\n            if (data.coverPage) {\n                this.button = data.coverPage.buttonText;\n                this.outcome = data.coverPage.outcome;\n                this.social = data.coverPage.showSocialShares;\n                if (data.coverPage.scoreRange) {\n                    this.rangeMax = data.coverPage.scoreRange.max;\n                    this.rangeMin = data.coverPage.scoreRange.min;\n                }\n            }\n        }\n        return EndPage;\n    })(Page.Page);\n    Page.EndPage = EndPage;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var Form = (function (_super) {\n        __extends(Form, _super);\n        function Form(engageform, data) {\n            var _this = this;\n            _super.call(this, engageform, data);\n            this.type = 2 /* Form */;\n            if (!data.forms) {\n                return;\n            }\n            data.forms.inputs.map(function (input) {\n                _this.cases.push(new Page.InputCase(_this, input));\n            });\n            if (this.cases.length) {\n                this.sent().then(function (sent) {\n                    _this.selectAnswer(sent);\n                });\n            }\n        }\n        Form.prototype.send = function (vcase) {\n            var deferred = Bootstrap.$q.defer();\n            var validated = true;\n            this.cases.map(function (input) {\n                if (!input.validate()) {\n                    validated = false;\n                }\n            });\n            if (validated) {\n                deferred.resolve(this.cases[0].send());\n            }\n            else {\n                deferred.resolve({});\n            }\n            return deferred.promise;\n        };\n        Form.prototype.selectAnswer = function (sent) {\n            this.cases.map(function (vcase) {\n                vcase.value = sent[vcase.id] || '';\n            });\n        };\n        return Form;\n    })(Page.Page);\n    Page.Form = Form;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var MultiChoice = (function (_super) {\n        __extends(MultiChoice, _super);\n        function MultiChoice(engageform, data) {\n            var _this = this;\n            _super.call(this, engageform, data);\n            this.type = 3 /* MultiChoice */;\n            if (!data.answers) {\n                return;\n            }\n            data.answers.map(function (answer) {\n                _this.cases.push(new Page.TextCase(_this, answer));\n            });\n            if (this.cases.length) {\n                this.sent().then(function (sent) {\n                    _this.selectAnswer(sent);\n                });\n            }\n        }\n        MultiChoice.prototype.selectAnswer = function (sent) {\n            var _this = this;\n            this.cases.map(function (vcase) {\n                vcase.selected = false;\n                vcase.correct = false;\n                vcase.incorrect = false;\n                if (vcase.id === sent.selectedCaseId) {\n                    _this.filled = true;\n                    vcase.selected = true;\n                }\n                if (sent.results) {\n                    vcase.result = sent.results[vcase.id] || 0;\n                }\n                if (sent.correctCaseId && (vcase.id === sent.correctCaseId || vcase.id === sent.selectedCaseId)) {\n                    if (vcase.id === sent.correctCaseId) {\n                        vcase.correct = true;\n                    }\n                    else {\n                        vcase.incorrect = true;\n                    }\n                }\n            });\n        };\n        return MultiChoice;\n    })(Page.Page);\n    Page.MultiChoice = MultiChoice;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var PictureChoice = (function (_super) {\n        __extends(PictureChoice, _super);\n        function PictureChoice(engageform, data) {\n            var _this = this;\n            _super.call(this, engageform, data);\n            this.type = 4 /* PictureChoice */;\n            if (!data.answers) {\n                return;\n            }\n            data.answers.map(function (answer) {\n                _this.cases.push(new Page.ImageCase(_this, answer));\n            });\n            if (this.cases.length) {\n                this.sent().then(function (sent) {\n                    _this.selectAnswer(sent);\n                });\n            }\n        }\n        PictureChoice.prototype.selectAnswer = function (sent) {\n            var _this = this;\n            this.cases.map(function (vcase) {\n                vcase.selected = false;\n                vcase.correct = false;\n                vcase.incorrect = false;\n                if (vcase.id === sent.selectedCaseId) {\n                    _this.filled = true;\n                    vcase.selected = true;\n                }\n                if (sent.results) {\n                    vcase.result = sent.results[vcase.id] || 0;\n                }\n                if (sent.correctCaseId && (vcase.id === sent.correctCaseId || vcase.id === sent.selectedCaseId)) {\n                    if (vcase.id === sent.correctCaseId) {\n                        vcase.correct = true;\n                    }\n                    else {\n                        vcase.incorrect = true;\n                    }\n                }\n            });\n        };\n        return PictureChoice;\n    })(Page.Page);\n    Page.PictureChoice = PictureChoice;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var Rateit = (function (_super) {\n        __extends(Rateit, _super);\n        function Rateit(engageform, data) {\n            var _this = this;\n            _super.call(this, engageform, data);\n            this.type = 5 /* Rateit */;\n            this.labelMin = data.rateIt.minLabel;\n            this.labelMax = data.rateIt.maxLabel;\n            for (var i = 1; i <= data.rateIt.maxRateItValue; i++) {\n                this.cases.push(new Page.IterationCase(this, {\n                    ordinal: i,\n                    symbol: data.rateIt.rateType\n                }));\n            }\n            this.sent().then(function (sent) {\n                if (sent.selectedValue) {\n                    _this.selectAnswer(sent);\n                }\n            });\n        }\n        Rateit.prototype.selectAnswer = function (sent) {\n            if (sent.selectedValue) {\n                this.filled = true;\n            }\n            if (sent.result) {\n                this.result = sent.result;\n            }\n            this.cases.map(function (vcase) {\n                vcase.selected = false;\n                if (sent.selectedValue >= vcase.ordinal) {\n                    vcase.selected = true;\n                }\n            });\n        };\n        return Rateit;\n    })(Page.Page);\n    Page.Rateit = Rateit;\n})(Page || (Page = {}));\n\nvar __extends = this.__extends || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    __.prototype = b.prototype;\n    d.prototype = new __();\n};\nvar Page;\n(function (Page) {\n    var StartPage = (function (_super) {\n        __extends(StartPage, _super);\n        function StartPage(engageform, data) {\n            _super.call(this, engageform, data);\n            this.type = 6 /* StartPage */;\n            this.button = 'Let\\'s get started';\n            if (data.coverPage) {\n                this.button = data.coverPage.buttonText || this.button;\n            }\n        }\n        return StartPage;\n    })(Page.Page);\n    Page.StartPage = StartPage;\n})(Page || (Page = {}));\n\n//# sourceMappingURL=engageform.js.map","/// <reference path=\"inavigation.ts\" />\n\nmodule Navigation {\n  export class Navigation implements INavigation {\n    private _engageform: Engageform.IEngageform;\n\n    enabled: boolean = false;\n    position: number = 0;\n    size: number = 0;\n    hasStart: boolean = false;\n    enabledStart: boolean = true;\n    hasPrev: boolean = false;\n    enabledPrev: boolean = true;\n    hasNext: boolean = false;\n    enabledNext: boolean = true;\n    hasFinish: boolean = false;\n    enabledFinish: boolean = true;\n\n    constructor(engageform: Engageform.IEngageform) {\n      this._engageform = engageform;\n      this.size = engageform.availablePages.length;\n\n      if (this._engageform.startPages.length > 0) {\n        this.hasStart = true;\n        this._engageform.setCurrent(this._engageform.startPages[0]);\n      } else {\n        this.enabled = true;\n        this.move(null);\n        this.hasPrev = false;\n      }\n    }\n\n    start($event): void {\n      this.disableDefaultAction($event);\n\n      this.enabled = true;\n      this.hasStart = false;\n      this.move(null);\n      this.hasPrev = false;\n    }\n\n    prev($event): void {\n      this.disableDefaultAction($event);\n\n      if (this._engageform.current) {\n        this._engageform.message = '';\n      }\n\n      this.position--;\n      this._engageform.setCurrent(this._engageform.availablePages[this.position - 1]);\n\n      this.hasPrev = false;\n      this.hasNext = true;\n      this.hasFinish = false;\n\n      if (this.position > 1) {\n        this.hasPrev = true;\n      }\n    }\n\n    pick($event, vcase: Page.ICase): void {\n      this.disableDefaultAction($event);\n\n      switch (Bootstrap.mode) {\n        default:\n          this._engageform.current.send(vcase).then(() => {\n            this.move(vcase);\n          }).catch(errorMessage => {\n            this._engageform.message = errorMessage;\n          });\n      }\n    }\n    next = this.pick;\n    finish = this.pick;\n\n    private move(vcase: Page.ICase): void {\n      this._engageform.message = '';\n      if (this._engageform.current) {\n        switch (Bootstrap.mode) {\n          case Engageform.Mode.Default:\n          case Engageform.Mode.Preview:\n            if (!this._engageform.current.filled && this._engageform.current.settings.requiredAnswer) {\n              this._engageform.message = 'Answer is required to proceed to next question';\n              return;\n            }\n            break;\n        }\n      }\n\n      this.position++;\n      if (this._engageform.availablePages.length >= this.position) {\n        this._engageform.setCurrent(this._engageform.availablePages[this.position - 1]);\n\n        this.hasPrev = true;\n        this.hasNext = false;\n        this.hasFinish = false;\n\n        if (this._engageform.availablePages.length > this.position) {\n          this.hasNext = true;\n        } else if (this._engageform.availablePages.length === this.position) {\n          this.hasFinish = true;\n        }\n\n      } else {\n        this.position = this._engageform.availablePages.length;\n        if (!vcase) {\n          this._engageform.setCurrentEndPage();\n\n          this.enabled = false;\n          this.hasPrev = false;\n          this.hasNext = false;\n          this.hasFinish = false;\n        }\n      }\n    }\n\n    private disableDefaultAction($event) {\n      if ($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n    }\n  }\n}\n","/// <reference path=\"ipage.ts\" />\n/// <reference path=\"ipages.ts\" />\n/// <reference path=\"ipagesent.ts\" />\n\nmodule Page {\n  export class Page implements IPage {\n    private _pageId: string;\n    private _engageform: Engageform.IEngageform;\n\n    type: Type;\n    title: string;\n    description: string;\n    media: string;\n    filled: boolean;\n    settings: ISetting;\n    cases: ICase[] = [];\n\n    get id(): string {\n      return this._pageId;\n    }\n\n    get engageform(): Engageform.IEngageform {\n      return this._engageform;\n    }\n\n    get Type() {\n      return Type;\n    }\n\n    get CaseType() {\n      return CaseType;\n    }\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      this._pageId = data._id;\n      this._engageform = engageform;\n\n      this.title = data.text;\n      this.description = data.description;\n      this.media = this.getMediaUrl(data.imageData, data.imageFile);\n      this.settings = <ISetting>new Settings(data);\n    }\n\n    send(vcase: ICase): ng.IPromise<IPageSent> {\n      if (vcase) {\n        return vcase.send();\n      }\n\n      var deferred = Bootstrap.$q.defer();\n      deferred.resolve();\n      return deferred.promise;\n    }\n\n    sent(): ng.IPromise<IPageSent> {\n      var deferred = Bootstrap.$q.defer();\n      var sent = <IPageSent>{};\n\n      switch (Bootstrap.mode) {\n        default:\n          sent = <IPageSent>(Bootstrap.localStorage.get('page.' + this.id) || {});\n          break;\n      }\n      deferred.resolve(sent);\n\n      return deferred.promise;\n    }\n\n    selectAnswer(data): void {\n      // \"abstract\"\n    }\n\n    private getMediaUrl(imageData, imageFile): string {\n      if (!imageFile) {\n        return '';\n      }\n\n      if (imageFile.indexOf('http') === -1) {\n        imageFile = Bootstrap.config.backend.api + '/uploads/' + imageFile;\n      }\n\n      return imageFile;\n    }\n  }\n}\n","/// <reference path=\"iuser.ts\" />\n\nclass User implements IUser {\n  private _id: string;\n  private _sessionId: string;\n\n  get id(): string {\n    if (!this._id) {\n      this._id = <string>Bootstrap.localStorage.get('userIdent');\n    }\n    return this._id;\n  }\n\n  set id(id: string) {\n    Bootstrap.localStorage.set('userIdent', id);\n    this._id = id;\n  }\n\n  get sessionId(): string {\n    if (!this._sessionId) {\n      this._sessionId = <string>Bootstrap.localStorage.get('sessionIdent');\n    }\n    return this._sessionId;\n  }\n\n  set sessionId(sessionId: string) {\n    Bootstrap.localStorage.set('sessionIdent', sessionId);\n    this._sessionId = sessionId;\n  }\n}\n","/// <reference path=\"api/api.ts\" />\n/// <reference path=\"engageform/engageform.ts\" />\n/// <reference path=\"navigation/navigation.ts\" />\n/// <reference path=\"page/page.ts\" />\n/// <reference path=\"user/user.ts\" />\n\nclass Bootstrap {\n  static $http: ng.IHttpService;\n  static $q: ng.IQService;\n  static localStorage: ng.local.storage.ILocalStorageService;\n  static user: User;\n  static config;\n  static mode = Engageform.Mode.Undefined;\n\n  private _engageform: Engageform.IEngageform;\n\n  constructor($http: ng.IHttpService, $q: ng.IQService, localStorage: ng.local.storage.ILocalStorageService, ApiConfig) {\n    Bootstrap.$http = $http;\n    Bootstrap.$q = $q;\n    Bootstrap.localStorage = localStorage;\n    Bootstrap.config = ApiConfig;\n    Bootstrap.user = new User();\n  }\n\n  get type(): Engageform.Type {\n    if (this._engageform) {\n      return this._engageform.type;\n    }\n\n    return Engageform.Type.Undefined;\n  }\n\n  get Type() {\n    return Engageform.Type;\n  }\n\n  get mode(): Engageform.Mode {\n    return Bootstrap.mode;\n  }\n\n  get Mode() {\n    return Engageform.Mode;\n  }\n\n  get title(): string {\n    if (this._engageform) {\n      return this._engageform.title;\n    }\n  }\n\n  get settings(): Engageform.ISetting {\n    if (this._engageform) {\n      return this._engageform.settings;\n    }\n  }\n\n  get theme(): Engageform.ITheme {\n    if (this._engageform) {\n      return this._engageform.theme;\n    }\n  }\n\n  get current(): Page.IPage {\n    if (this._engageform) {\n      return this._engageform.current;\n    }\n  }\n\n  get navigation(): Navigation.INavigation {\n    if (this._engageform) {\n      return this._engageform.navigation;\n    }\n  }\n\n  get message(): string {\n    if (this._engageform) {\n      return this._engageform.message;\n    }\n  }\n\n  init(opts: API.IEmbed): ng.IPromise<Engageform.IEngageform> {\n    switch (opts.mode) {\n      case 'preview':\n        Bootstrap.mode = Engageform.Mode.Preview;\n        break;\n      case 'summary':\n        Bootstrap.mode = Engageform.Mode.Summary;\n        break;\n      case 'result':\n        Bootstrap.mode = Engageform.Mode.Result;\n        break;\n      default:\n        Bootstrap.mode = Engageform.Mode.Default;\n    }\n\n    return Engageform.Engageform.getById(opts.id).then((engageform) => {\n      switch (engageform.type) {\n        case 'outcome':\n          this._engageform = new Engageform.Outcome(engageform);\n          break;\n        case 'poll':\n          this._engageform = new Engageform.Poll(engageform);\n          break;\n        case 'score':\n          this._engageform = new Engageform.Score(engageform);\n          break;\n        case 'survey':\n          this._engageform = new Engageform.Survey(engageform);\n          break;\n      }\n\n      return this._engageform.initPages();\n    }).then(function(engageform) {\n      engageform.navigation = new Navigation.Navigation(<Engageform.IEngageform>engageform);\n\n      return engageform;\n    });\n  }\n}\n\nBootstrap.$inject = ['$http', '$q', 'localStorageService', 'ApiConfig'];\napp.service('Engageform', Bootstrap);\n","module Engageform {\n  export enum Type {\n    Undefined,\n    Live,\n    Outcome,\n    Poll,\n    Score,\n    Survey\n  }\n\n  export enum Mode {\n    Undefined,\n    Default,\n    Preview,\n    Result,\n    Summary\n  }\n}\n","/// <reference path=\"isettings.ts\" />\n\nmodule Engageform {\n  export class Settings implements ISetting {\n    allowAnswerChange: boolean = false;\n\n    constructor(data: API.IQuiz) {\n      if (data.settings) {\n        this.allowAnswerChange = !!data.settings.allowAnswerChange;\n      }\n    }\n  }\n}\n","/// <reference path=\"itheme.ts\" />\n\nmodule Engageform {\n  export class Theme implements ITheme {\n    answerBackgroundColor: string = '';\n    answerBorderColor: string = '';\n    answerColor: string = '';\n    backgroundBrightness: string = '';\n    backgroundColor: string = '';\n    backgroundImageBlur: string = '';\n    backgroundImageFile: string = '';\n    backgroundImagePosition: string = '';\n    buttonColor: string = '';\n    font: string = '';\n    questionColor: string = '';\n    customThemeCssFile: string = '';\n\n    constructor(data: API.IQuiz) {\n      if (data.theme) {\n        this.answerBackgroundColor = data.theme.answerBackgroundColor || '';\n        this.answerBorderColor = data.theme.answerBorderColor || '';\n        this.answerColor = data.theme.answerColor || '';\n        this.backgroundBrightness = data.theme.backgroundBrightness || '';\n        this.backgroundColor = data.theme.backgroundColor || '';\n        this.backgroundImageBlur = data.theme.backgroundImageBlur || '';\n        this.backgroundImageFile = data.theme.backgroundImageFile || '';\n        this.backgroundImagePosition = data.theme.backgroundImagePosition || '';\n        this.buttonColor = data.theme.buttonColor || '';\n        this.font = data.theme.font || '';\n        this.questionColor = data.theme.questionColor || '';\n\n        if (data.theme.customThemeCssFile) {\n          this.customThemeCssFile = Bootstrap.config.backend.api + '/uploads/' + data.theme.customThemeCssFile;\n        }\n      }\n    }\n  }\n}\n","module Engageform {\n  export class Outcome extends Engageform {\n    type = Type.Outcome;\n\n    setCurrentEndPage(): ng.IPromise<API.IQuizFinish> {\n      return super.setCurrentEndPage().then((data) => {\n        var hasEndPage = false;\n\n        this.endPages.map((pageId) => {\n          if (this.pages[pageId].outcome === data.outcome) {\n            hasEndPage = true;\n            this.setCurrent(pageId);\n          }\n        });\n\n        if (!hasEndPage) {\n          this.message = 'Thank you!';\n        }\n\n        return data;\n      });\n    }\n  }\n}\n","module Engageform {\n  export class Poll extends Engageform {\n    type = Type.Poll;\n\n    setCurrentEndPage(): ng.IPromise<API.IQuizFinish> {\n      return super.setCurrentEndPage().then((data) => {\n        if (this.endPages.length) {\n          this.setCurrent(this.endPages[0]);\n        } else {\n          this.message = 'Thank you!';\n        }\n\n        return data;\n      });\n    }\n  }\n}\n","module Engageform {\n  export class Score extends Engageform {\n    type = Type.Score;\n\n    setCurrentEndPage(): ng.IPromise<API.IQuizFinish> {\n      return super.setCurrentEndPage().then((data) => {\n        var score = Math.round(data.totalScore / data.maxScore * 100);\n        var hasEndPage = false;\n\n        this.endPages.map((pageId) => {\n          if (this.pages[pageId].rangeMin <= score && this.pages[pageId].rangeMax >= score) {\n            hasEndPage = true;\n            this.pages[pageId].score = score;\n            this.setCurrent(pageId);\n          }\n        });\n\n        if (!hasEndPage) {\n          this.message = 'Thank you!';\n        }\n\n        return data;\n      });\n    }\n  }\n}\n","module Engageform {\n  export class Survey extends Engageform {\n    type = Type.Survey;\n\n    setCurrentEndPage(): ng.IPromise<API.IQuizFinish> {\n      return super.setCurrentEndPage().then((data) => {\n        if (this.endPages.length) {\n          this.setCurrent(this.endPages[0]);\n        } else {\n          this.message = 'Thank you!';\n        }\n\n        return data;\n      });\n    }\n  }\n}\n","/// <reference path=\"icase.ts\" />\n\nmodule Page {\n  export class Case implements ICase {\n    private _caseId: string;\n    private _page: IPage;\n\n    type = CaseType.Undefined;\n\n    get id(): string {\n      return this._caseId;\n    }\n\n    set id(caseId: string) {\n      this._caseId = caseId;\n    }\n\n    get page(): IPage {\n      return this._page;\n    }\n\n    constructor(page: IPage, data) {\n      this._caseId = data._id;\n      this._page = page;\n    }\n\n    send(): ng.IPromise<IPageSent> {\n      var deferred = Bootstrap.$q.defer();\n      deferred.resolve(<IPageSent>{});\n      return deferred.promise;\n    }\n\n    makeSend(data: API.IQuizQuestionAnswer): ng.IPromise<API.IQuizQuestionAnswer> {\n      var url = Bootstrap.config.backend.domain + Bootstrap.config.engageform.pageResponseUrl;\n          url = url.replace(':pageId', this.page.id);\n\n      if (Bootstrap.mode !== Engageform.Mode.Default) {\n        url += '?preview';\n      }\n\n      data.quizQuestionId = this.page.id;\n      data.userIdent = Bootstrap.user.sessionId;\n\n      return Bootstrap.$http.post(url, data).then((res: API.IQuizQuestionAnswerResponse) => {\n        if ([200, 304].indexOf(res.status) !== -1) {\n          if (!data.userIdent) {\n            Bootstrap.user.sessionId = res.data.userIdent;\n          }\n          return res.data;\n        }\n\n        return Bootstrap.$q.reject(res);\n      });\n    }\n\n    load(): IPageSent {\n      return <IPageSent>Bootstrap.localStorage.get('page.' + this.page.id) || <IPageSent>{};\n    }\n\n    save(data: IPageSent): void {\n      Bootstrap.localStorage.set('page.' + this.page.id, data);\n    }\n\n    validate(): boolean {\n      // \"abstract\"\n      return true;\n    }\n  }\n}\n","module Page {\n  export enum CaseType {\n    Undefined,\n    Image,\n    Input,\n    Iteration,\n    Text\n  }\n\n  export enum Type {\n    Undefined,\n    EndPage,\n    Form,\n    MultiChoice,\n    PictureChoice,\n    Rateit,\n    StartPage\n  }\n}\n","/// <reference path=\"isettings.ts\" />\n\nmodule Page {\n  export class Settings implements ISetting {\n    showAnswers: boolean = false;\n    showCorrectAnswer: boolean = false;\n    showMainMedia: boolean = false;\n    showDescription: boolean = false;\n    requiredAnswer: boolean = false;\n\n    constructor(data: API.IQuizQuestion) {\n      this.requiredAnswer = !!data.requiredAnswer;\n\n      if (data.settings) {\n        this.showAnswers = !!data.settings.showAnswers;\n        this.showCorrectAnswer = !!data.settings.showCorrectAnswer;\n        this.showMainMedia = !!data.settings.showMainMedia;\n        this.showDescription = !!data.settings.showDescription;\n      }\n    }\n  }\n}\n","module Page {\n  export class ImageCase extends Case {\n    type = CaseType.Image;\n\n    selected: boolean = false;\n    correct: boolean = false;\n    incorrect: boolean = false;\n\n    title: string;\n    image: string;\n\n    constructor(page: IPage, data) {\n      super(page, data);\n\n      this.title = data.text;\n      this.image = data.imageFile;\n    }\n\n    send() {\n      if (!this.page.engageform.settings.allowAnswerChange && this.page.filled) {\n        return Bootstrap.$q.reject('Changing answer is not allowed');\n      }\n\n      return super.makeSend({selectedAnswerId: this.id}).then((res) => {\n        var data = <IPageSent>{};\n\n        if (res.selectedAnswerId) {\n          data.selectedCaseId = res.selectedAnswerId;\n        }\n\n        if (res.correctAnswerId) {\n          data.correctCaseId = res.correctAnswerId;\n        }\n\n        super.save(data);\n        this.page.selectAnswer(data);\n\n        return data;\n      });\n    }\n  }\n}\n","module Page {\n  export class InputCase extends Case {\n    type = CaseType.Input;\n\n    title: string;\n    correct: boolean;\n    incorrect: boolean;\n    expectedValue: string;\n    value: string;\n    error: string;\n\n    constructor(page: IPage, data) {\n      super(page, data);\n\n      this.title = data.text;\n      this.expectedValue = data.type;\n      this.value = '';\n    }\n\n    send() {\n      var data: IPageSent = <IPageSent>{};\n          data.inputs = [];\n      var sent = this.load();\n\n      for (var sentId in sent) {\n        if (sent.hasOwnProperty(sentId)) {\n          data.inputs.push({\n            _id: sentId,\n            value: sent[sentId]\n          });\n        }\n      }\n\n      return super.makeSend(data).then(() => {\n        return data;\n      });\n    }\n\n    validate(): boolean {\n      this.correct = false;\n      this.incorrect = false;\n\n      if (this.page.settings.requiredAnswer && !this.value) {\n        this.error = 'Answer is required';\n        this.incorrect = true;\n      } else {\n        this.error = '';\n        this.correct = true;\n      }\n\n      if (this.correct) {\n        var sent = this.load();\n        sent[this.id] = this.value;\n        this.save(sent);\n\n        return true;\n      }\n\n      return false;\n    }\n  }\n}\n","module Page {\n  export class IterationCase extends Case {\n    type = CaseType.Iteration;\n\n    selected: boolean = false;\n\n    ordinal: number;\n    symbol: string;\n\n    constructor(page: IPage, data) {\n      super(page, data);\n\n      this.ordinal = data.ordinal;\n      this.symbol = data.symbol;\n    }\n\n    send() {\n      if (!this.page.engageform.settings.allowAnswerChange && this.page.filled) {\n        return Bootstrap.$q.reject('Changing answer is not allowed');\n      }\n\n      return super.makeSend({quizQuestionId: this.page.id, rateItValue: this.ordinal}).then((res) => {\n        var data: IPageSent = <IPageSent>{};\n\n        if (res.selectedValue) {\n          data.selectedValue = res.selectedValue;\n        }\n\n        if (res.avgRateItValue) {\n          data.result = +res.avgRateItValue;\n        }\n\n        super.save(data);\n        this.page.selectAnswer(data);\n\n        return data;\n      });\n    }\n  }\n}\n","module Page {\n  export class TextCase extends Case {\n    type = CaseType.Text;\n\n    result: number;\n    selected: boolean = false;\n    correct: boolean = false;\n    incorrect: boolean = false;\n\n    title: string;\n\n    constructor(page: IPage, data) {\n      super(page, data);\n\n      this.title = data.text;\n    }\n\n    send() {\n      if (!this.page.engageform.settings.allowAnswerChange && this.page.filled) {\n        return Bootstrap.$q.reject('Changing answer is not allowed');\n      }\n\n      return super.makeSend({selectedAnswerId: this.id}).then((res) => {\n        var data: IPageSent = <IPageSent>{};\n\n        if (res.selectedAnswerId) {\n          data.selectedCaseId = res.selectedAnswerId;\n        }\n\n        if (res.correctAnswerId) {\n          data.correctCaseId = res.correctAnswerId;\n        }\n\n        for (var caseId in res.stats) {\n          if (res.stats.hasOwnProperty(caseId)) {\n            data.results = data.results || {};\n            if (/.{24}/.test(caseId)) {\n              data.results[caseId] = res.stats[caseId];\n            }\n          }\n        }\n\n        super.save(data);\n        this.page.selectAnswer(data);\n\n        return data;\n      });\n    }\n  }\n}\n","module Page {\n  export class EndPage extends Page {\n    type = Type.EndPage;\n\n    /* outcome */\n    button: string;\n    outcome: string;\n    social: boolean;\n    /* score */\n    score: number;\n    rangeMin: number;\n    rangeMax: number;\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      super(engageform, data);\n\n      if (data.coverPage) {\n        this.button = data.coverPage.buttonText;\n        this.outcome = data.coverPage.outcome;\n        this.social = data.coverPage.showSocialShares;\n\n        if (data.coverPage.scoreRange) {\n          this.rangeMax = data.coverPage.scoreRange.max;\n          this.rangeMin = data.coverPage.scoreRange.min;\n        }\n      }\n    }\n  }\n}\n","module Page {\n  export class Form extends Page {\n    type = Type.Form;\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      super(engageform, data);\n\n      if (!data.forms) {\n        return;\n      }\n\n      data.forms.inputs.map((input) => {\n        this.cases.push(<ICase>new InputCase(<IPage>this, input));\n      });\n\n      if (this.cases.length) {\n        this.sent().then(sent => {\n          this.selectAnswer(sent);\n        });\n      }\n    }\n\n    send(vcase: ICase): ng.IPromise<IPageSent> {\n      var deferred = Bootstrap.$q.defer();\n      var validated = true;\n\n      this.cases.map((input) => {\n        if (!input.validate()) {\n          validated = false;\n        }\n      });\n\n      if (validated) {\n        deferred.resolve(this.cases[0].send());\n      } else {\n        deferred.resolve(<IPageSent>{});\n      }\n\n      return deferred.promise;\n    }\n\n    selectAnswer(sent) {\n      this.cases.map((vcase) => {\n        vcase.value = sent[vcase.id] || '';\n      });\n    }\n  }\n}\n","module Page {\n  export class MultiChoice extends Page {\n    type = Type.MultiChoice;\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      super(engageform, data);\n\n      if (!data.answers) {\n        return;\n      }\n\n      data.answers.map((answer) => {\n        this.cases.push(<ICase>new TextCase(<IPage>this, answer));\n      });\n\n      if (this.cases.length) {\n        this.sent().then(sent => {\n          this.selectAnswer(sent);\n        });\n\n        }\n\n    }\n\n    selectAnswer(sent) {\n      this.cases.map((vcase: ICase) => {\n        vcase.selected = false;\n        vcase.correct = false;\n        vcase.incorrect = false;\n\n        if (vcase.id === sent.selectedCaseId) {\n          this.filled = true;\n          vcase.selected = true;\n        }\n\n        if (sent.results) {\n          vcase.result = sent.results[vcase.id] || 0;\n        }\n\n        if (sent.correctCaseId && (vcase.id === sent.correctCaseId || vcase.id === sent.selectedCaseId)) {\n          if (vcase.id === sent.correctCaseId) {\n            vcase.correct = true;\n          } else {\n            vcase.incorrect = true;\n          }\n        }\n      });\n    }\n  }\n}\n","module Page {\n  export class PictureChoice extends Page {\n    type = Type.PictureChoice;\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      super(engageform, data);\n\n      if (!data.answers) {\n        return;\n      }\n\n      data.answers.map((answer) => {\n        this.cases.push(<ICase>new ImageCase(<IPage>this, answer));\n      });\n\n      if (this.cases.length) {\n        this.sent().then(sent => {\n          this.selectAnswer(sent);\n        });\n\n        }\n\n    }\n\n    selectAnswer(sent) {\n      this.cases.map((vcase: ICase) => {\n        vcase.selected = false;\n        vcase.correct = false;\n        vcase.incorrect = false;\n\n        if (vcase.id === sent.selectedCaseId) {\n          this.filled = true;\n          vcase.selected = true;\n        }\n\n        if (sent.results) {\n          vcase.result = sent.results[vcase.id] || 0;\n        }\n\n        if (sent.correctCaseId && (vcase.id === sent.correctCaseId || vcase.id === sent.selectedCaseId)) {\n          if (vcase.id === sent.correctCaseId) {\n            vcase.correct = true;\n          } else {\n            vcase.incorrect = true;\n          }\n        }\n      });\n    }\n  }\n}\n","module Page {\n  export class Rateit extends Page {\n    type = Type.Rateit;\n\n    result: number;\n    labelMin: string;\n    labelMax: string;\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      super(engageform, data);\n\n      this.labelMin = data.rateIt.minLabel;\n      this.labelMax = data.rateIt.maxLabel;\n\n      for (var i = 1; i <= data.rateIt.maxRateItValue; i++) {\n        this.cases.push(<ICase>new IterationCase(<IPage>this, {\n          ordinal: i,\n          symbol: data.rateIt.rateType\n        }));\n      }\n\n      this.sent().then(sent => {\n        if (sent.selectedValue) {\n          this.selectAnswer(sent);\n        }\n      });\n\n    }\n\n    selectAnswer(sent) {\n      if (sent.selectedValue) {\n        this.filled = true;\n      }\n\n      if (sent.result) {\n        this.result = sent.result;\n      }\n\n      this.cases.map((vcase: ICase) => {\n        vcase.selected = false;\n\n        if (sent.selectedValue >= vcase.ordinal) {\n          vcase.selected = true;\n        }\n      });\n    }\n  }\n}\n","module Page {\n  export class StartPage extends Page {\n    type = Type.StartPage;\n\n    button: string = 'Let\\'s get started';\n\n    constructor(engageform: Engageform.IEngageform, data: API.IQuizQuestion) {\n      super(engageform, data);\n\n      if (data.coverPage) {\n        this.button = data.coverPage.buttonText || this.button;\n      }\n    }\n  }\n}\n"],"sourceRoot":"/source/"}
/*!
 * 4screens-angular-engageform v0.2.3
 * (c) 2015 Nopattern sp. z o.o.
 * License: proprietary
 */
var Engageform;!function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Live=1]="Live",e[e.Outcome=2]="Outcome",e[e.Poll=3]="Poll",e[e.Score=4]="Score",e[e.Survey=5]="Survey"}(e.Type||(e.Type={}));e.Type;!function(e){e[e.Undefined=0]="Undefined",e[e.Default=1]="Default",e[e.Preview=2]="Preview",e[e.Result=3]="Result",e[e.Summary=4]="Summary"}(e.Mode||(e.Mode={}));e.Mode}(Engageform||(Engageform={}));var Page;!function(e){!function(e){e[e.Undefined=0]="Undefined",e[e.Image=1]="Image",e[e.Input=2]="Input",e[e.Iteration=3]="Iteration",e[e.Text=4]="Text"}(e.CaseType||(e.CaseType={}));e.CaseType;!function(e){e[e.Undefined=0]="Undefined",e[e.EndPage=1]="EndPage",e[e.Form=2]="Form",e[e.MultiChoice=3]="MultiChoice",e[e.PictureChoice=4]="PictureChoice",e[e.Rateit=5]="Rateit",e[e.StartPage=6]="StartPage"}(e.Type||(e.Type={}));e.Type}(Page||(Page={}));var Events;!function(e){var t=function(){function e(){this.listeners={}}return e.prototype.listen=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.trigger=function(e,t){if(void 0===t&&(t={}),this.listeners[e])for(var n=0;n<this.listeners[e].length;n+=1)this.listeners[e][n](t)},e}();e.Events=t}(Events||(Events={}));var app=angular.module("4screens.engageform",["LocalStorageModule"]),Engageform;!function(e){var t=function(){function t(t){this._pages={},this._startPages=[],this._endPages=[],this._availablePages=[],this._hasForms=!1,this.enabled=!0,this.type=e.Type.Undefined,this._engageformId=t._id,this.title=t.title,this.settings=new e.Settings(t),this.theme=new e.Theme(t),this.branding=new Branding.Branding(t.settings.branding)}return Object.defineProperty(t.prototype,"pages",{get:function(){return this._pages},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPages",{get:function(){return this._startPages},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endPages",{get:function(){return this._endPages},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"availablePages",{get:function(){return this._availablePages},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasForms",{get:function(){return this._hasForms},enumerable:!0,configurable:!0}),t.prototype.isType=function(e){return this.type===e},t.prototype.initPages=function(){var e=this;return this.getPagesById(this._engageformId).then(function(t){return t.map(function(t){switch(t.type){case"multiChoice":e._availablePages.push(t._id),e._pages[t._id]=new Page.MultiChoice(e,t);break;case"pictureChoice":e._availablePages.push(t._id),e._pages[t._id]=new Page.PictureChoice(e,t);break;case"rateIt":e._availablePages.push(t._id),e._pages[t._id]=new Page.Rateit(e,t);break;case"forms":e._hasForms=!0,e._availablePages.push(t._id),e._pages[t._id]=new Page.Form(e,t);break;case"startPage":e._startPages.push(t._id),e._pages[t._id]=new Page.StartPage(e,t);break;case"endPage":e._endPages.push(t._id),e._pages[t._id]=new Page.EndPage(e,t)}}),e})},t.prototype.setCurrent=function(e){this.current=this._pages[e]},t.prototype.setCurrentEndPage=function(){var t=Bootstrap.config.backend.domain+Bootstrap.config.engageform.engageformFinishUrl;return t=t.replace(":engageformId",this._engageformId),Bootstrap.mode!==e.Mode.Default&&(t+="?preview"),Bootstrap.$http.post(t,{userIdent:Bootstrap.user.sessionId,globalUserIdent:Bootstrap.user.id}).then(function(e){return-1!==[200,304].indexOf(e.status)?(Bootstrap.localStorage.clearAll(),Bootstrap.user.id=e.data.globalUserIdent,e.data):this.$q.reject(e)})},t.getById=function(t){var n=Bootstrap.config.backend.domain+Bootstrap.config.engageform.engageformUrl;return n=n.replace(":engageformId",t),Bootstrap.mode!==e.Mode.Default&&(n+="?preview"),Bootstrap.$http.get(n).then(function(e){return-1!==[200,304].indexOf(e.status)?e.data:Bootstrap.$q.reject(e)})},t.prototype.getPagesById=function(t){var n=Bootstrap.config.backend.domain+Bootstrap.config.engageform.engageformPagesUrl;return n=n.replace(":engageformId",t),Bootstrap.mode!==e.Mode.Default&&(n+="?preview"),Bootstrap.$http.get(n).then(function(e){return-1!==[200,304].indexOf(e.status)?e.data:void this.$q.reject(e)})},t}();e.Engageform=t}(Engageform||(Engageform={}));var Navigation;!function(e){var t=function(){function e(e){this.enabled=!1,this.position=0,this.size=0,this.hasStart=!1,this.enabledStart=!0,this.hasPrev=!1,this.enabledPrev=!0,this.hasNext=!1,this.enabledNext=!0,this.hasFinish=!1,this.enabledFinish=!0,this.next=this.pick,this.finish=this.pick,this._engageform=e,this.size=e.availablePages.length,this._engageform.startPages.length>0?(this.hasStart=!0,this._engageform.setCurrent(this._engageform.startPages[0])):(this.enabled=!0,this.move(null),this.hasPrev=!1)}return e.prototype.start=function(e){this.disableDefaultAction(e),this.enabled=!0,this.hasStart=!1,this.move(null),this.hasPrev=!1},e.prototype.prev=function(e){this.disableDefaultAction(e),this._engageform.current&&(this._engageform.message=""),this.position--,this._engageform.setCurrent(this._engageform.availablePages[this.position-1]),this.hasPrev=!1,this.hasNext=!0,this.hasFinish=!1,this.position>1&&(this.hasPrev=!0)},e.prototype.pick=function(e,t){var n=this;switch(this.disableDefaultAction(e),Bootstrap.mode){default:this._engageform.current.send(t).then(function(){n.move(t)})["catch"](function(e){n._engageform.message=e})}},e.prototype.move=function(e){var t=this;if(this._engageform.message="",this._engageform.current)switch(Bootstrap.mode){case Engageform.Mode.Default:case Engageform.Mode.Preview:if(!this._engageform.current.filled&&this._engageform.current.settings.requiredAnswer)return void(this._engageform.message="Answer is required to proceed to next question")}this.position++,this._engageform.availablePages.length>=this.position?(this._engageform.setCurrent(this._engageform.availablePages[this.position-1]),this.hasPrev=!0,this.hasNext=!1,this.hasFinish=!1,this._engageform.availablePages.length>this.position?this.hasNext=!0:this._engageform.availablePages.length===this.position&&(this.hasFinish=!(this._engageform.isType(Engageform.Type.Poll)&&!this._engageform.hasForms))):(this.position=this._engageform.availablePages.length,e||this._engageform.setCurrentEndPage().then(function(){t.enabled=!1,t.hasPrev=!1,t.hasNext=!1,t.hasFinish=!1})["catch"](function(e){e.data.msg&&(t._engageform.message=e.data.msg)}))},e.prototype.disableDefaultAction=function(e){e&&(e.stopPropagation(),e.preventDefault())},e}();e.Navigation=t}(Navigation||(Navigation={}));var Page;!function(e){var t=function(){function t(t,n){this.cases=[],this._pageId=n._id,this._engageform=t,this.title=n.text,this.description=n.description,this.media=this.getMediaUrl(n.imageData,n.imageFile),this.settings=new e.Settings(n)}return Object.defineProperty(t.prototype,"id",{get:function(){return this._pageId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engageform",{get:function(){return this._engageform},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Type",{get:function(){return e.Type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"CaseType",{get:function(){return e.CaseType},enumerable:!0,configurable:!0}),t.prototype.send=function(e){if(this._engageform.enabled===!1)return Bootstrap.$q.reject("Engageform already ended.");if(e)return e.send();var t=Bootstrap.$q.defer();return t.resolve(),t.promise},t.prototype.sent=function(){var e=Bootstrap.$q.defer(),t={};switch(Bootstrap.mode){default:t=Bootstrap.localStorage.get("page."+this.id)||{}}return e.resolve(t),e.promise},t.prototype.selectAnswer=function(e){},t.prototype.getMediaUrl=function(e,t){return t?(-1===t.indexOf("http")&&(t=Bootstrap.config.backend.api+"/uploads/"+t),t):""},t}();e.Page=t}(Page||(Page={}));var User=function(){function e(){}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id||(this._id=Bootstrap.localStorage.get("userIdent")),this._id},set:function(e){Bootstrap.localStorage.set("userIdent",e),this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId||(this._sessionId=Bootstrap.localStorage.get("sessionIdent")),this._sessionId},set:function(e){Bootstrap.localStorage.set("sessionIdent",e),this._sessionId=e},enumerable:!0,configurable:!0}),e}(),Bootstrap=function(){function e(t,n,r,o){e.$http=t,e.$q=n,e.localStorage=r,e.config=o,e.user=new User}return Object.defineProperty(e.prototype,"type",{get:function(){return this._engageform?this._engageform.type:Engageform.Type.Undefined},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return Engageform.Type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return e.mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Mode",{get:function(){return Engageform.Mode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._engageform?this._engageform.title:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._engageform?this._engageform.theme:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this._engageform?this._engageform.current:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"navigation",{get:function(){return this._engageform?this._engageform.navigation:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._engageform?this._engageform.message:void 0},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var n=this;if(!t||!t.id)return e.$q.reject({status:"error",error:{code:406,message:"The required id property does not exist."},data:t});switch(t.mode){case"preview":e.mode=Engageform.Mode.Preview;break;case"summary":e.mode=Engageform.Mode.Summary;break;case"result":e.mode=Engageform.Mode.Result;break;case"default":case"":case void 0:e.mode=Engageform.Mode.Default;break;default:return e.$q.reject({status:"error",error:{code:406,message:"Mode property not supported."},data:t})}return Engageform.Engageform.getById(t.id).then(function(t){switch(t.type){case"outcome":n._engageform=new Engageform.Outcome(t);break;case"poll":n._engageform=new Engageform.Poll(t);break;case"score":n._engageform=new Engageform.Score(t);break;case"survey":n._engageform=new Engageform.Survey(t);break;default:return e.$q.reject({status:"error",error:{code:406,message:"Type property not supported."},data:t})}return n._engageform.initPages()}).then(function(e){return e.navigation=new Navigation.Navigation(e),e})},e.mode=Engageform.Mode.Undefined,e.events=new Events.Events,e}();Bootstrap.$inject=["$http","$q","localStorageService","ApiConfig"],app.service("Engageform",Bootstrap);var Branding;!function(e){var t=function(){function e(e){void 0===e&&(e={}),this._isCustom=!1,this._defaultBranding=Bootstrap.config.backend.branding,(e.text||e.link||e.imageUrl)&&(this._isCustom=!0),this._text=e.text||this._defaultBranding.text,this._link=e.link||this._defaultBranding.link;var t=e.imageUrl||this._defaultBranding.imageUrl;this._imageUrl=t===this._defaultBranding.imageUrl?Bootstrap.config.backend.domain+t:Bootstrap.config.backend.domain+Bootstrap.config.backend.imagesUrl+"/"+t}return Object.defineProperty(e.prototype,"isCustom",{get:function(){return this._isCustom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDefault",{get:function(){return!this._isCustom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return this._imageUrl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"link",{get:function(){return this._link},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e}();e.Branding=t}(Branding||(Branding={}));var Engageform;!function(e){var t=function(){function e(e){this.allowAnswerChange=!1,e.settings&&(this.allowAnswerChange=!!e.settings.allowAnswerChange)}return e}();e.Settings=t}(Engageform||(Engageform={}));var Engageform;!function(e){var t=function(){function e(e){this.answerBackgroundColor="",this.answerBorderColor="",this.answerColor="",this.backgroundBrightness="",this.backgroundColor="",this.backgroundImageBlur="",this.backgroundImageFile="",this.backgroundImagePosition="",this.buttonColor="",this.font="",this.questionColor="",this.customThemeCssFile="",e.theme&&(this.answerBackgroundColor=e.theme.answerBackgroundColor||"",this.answerBorderColor=e.theme.answerBorderColor||"",this.answerColor=e.theme.answerColor||"",this.backgroundBrightness=e.theme.backgroundBrightness||"",this.backgroundColor=e.theme.backgroundColor||"",this.backgroundImageBlur=e.theme.backgroundImageBlur||"",this.backgroundImageFile=e.theme.backgroundImageFile||"",this.backgroundImagePosition=e.theme.backgroundImagePosition||"",this.buttonColor=e.theme.buttonColor||"",this.font=e.theme.font||"",this.questionColor=e.theme.questionColor||"",e.theme.customThemeCssFile&&(this.customThemeCssFile=Bootstrap.config.backend.api+"/uploads/"+e.theme.customThemeCssFile))}return e}();e.Theme=t}(Engageform||(Engageform={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Engageform;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.type=e.Type.Outcome}return __extends(n,t),n.prototype.setCurrentEndPage=function(){var e=this;return t.prototype.setCurrentEndPage.call(this).then(function(t){var n=!1;return e.endPages.map(function(r){var o=e.pages[r];o.outcome===t.outcome&&(n=!0,e.setCurrent(r))}),n||(e.enabled=!1,e.message="Thank you!"),t})},n}(e.Engageform);e.Outcome=t}(Engageform||(Engageform={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Engageform;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.type=e.Type.Poll}return __extends(n,t),n.prototype.setCurrentEndPage=function(){var e=this;return t.prototype.setCurrentEndPage.call(this).then(function(t){return e.endPages.length?e.setCurrent(e.endPages[0]):(e.enabled=!1,e.message="Thank you!"),t})},n}(e.Engageform);e.Poll=t}(Engageform||(Engageform={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Engageform;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.type=e.Type.Score}return __extends(n,t),n.prototype.setCurrentEndPage=function(){var e=this;return t.prototype.setCurrentEndPage.call(this).then(function(t){var n=Math.round(t.totalScore/t.maxScore*100),r=!1;return e.endPages.map(function(t){var o=e.pages[t];o.rangeMin<=n&&o.rangeMax>=n&&(r=!0,e.pages[t].score=n,e.setCurrent(t))}),r||(e.enabled=!1,e.message="Thank you!"),t})},n}(e.Engageform);e.Score=t}(Engageform||(Engageform={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Engageform;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.type=e.Type.Survey}return __extends(n,t),n.prototype.setCurrentEndPage=function(){var e=this;return t.prototype.setCurrentEndPage.call(this).then(function(t){return e.endPages.length?e.setCurrent(e.endPages[0]):(e.enabled=!1,e.message="Thank you!"),t})},n}(e.Engageform);e.Survey=t}(Engageform||(Engageform={}));var Page;!function(e){var t=function(){function t(t,n){this.type=e.CaseType.Undefined,this._caseId=n._id,this._page=t}return Object.defineProperty(t.prototype,"id",{get:function(){return this._caseId},set:function(e){this._caseId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this._page},enumerable:!0,configurable:!0}),t.prototype.send=function(){var e=Bootstrap.$q.defer();return e.resolve({}),e.promise},t.prototype.makeSend=function(e){var t=Bootstrap.config.backend.domain+Bootstrap.config.engageform.pageResponseUrl;return t=t.replace(":pageId",this.page.id),Bootstrap.mode!==Engageform.Mode.Default&&(t+="?preview"),e.quizQuestionId=this.page.id,e.userIdent=Bootstrap.user.sessionId,Bootstrap.$http.post(t,e).then(function(t){return-1!==[200,304].indexOf(t.status)?(e.userIdent||(Bootstrap.user.sessionId=t.data.userIdent),t.data):Bootstrap.$q.reject(t)})},t.prototype.load=function(){return Bootstrap.localStorage.get("page."+this.page.id)||{}},t.prototype.save=function(e){Bootstrap.localStorage.set("page."+this.page.id,e)},t.prototype.validate=function(){return!0},t}();e.Case=t}(Page||(Page={}));var Page;!function(e){var t=function(){function e(e){this.showAnswers=!1,this.showCorrectAnswer=!1,this.showMainMedia=!1,this.showDescription=!1,this.requiredAnswer=!1,this.requiredAnswer=!!e.requiredAnswer,e.settings&&(this.showAnswers=!!e.settings.showAnswers,this.showCorrectAnswer=!!e.settings.showCorrectAnswer,this.showMainMedia=!!e.settings.showMainMedia,this.showDescription=!!e.settings.showDescription)}return e}();e.Settings=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){t.call(this,n,r),this.type=e.CaseType.Image,this.selected=!1,this.correct=!1,this.incorrect=!1,this.title=r.text,this.image=r.imageFile}return __extends(n,t),n.prototype.send=function(){var e=this;return!this.page.engageform.settings.allowAnswerChange&&this.page.filled?Bootstrap.$q.reject("Changing answer is not allowed"):t.prototype.makeSend.call(this,{selectedAnswerId:this.id}).then(function(n){var r={};return n.selectedAnswerId&&(r.selectedCaseId=n.selectedAnswerId),n.correctAnswerId&&(r.correctCaseId=n.correctAnswerId),t.prototype.save.call(e,r),e.page.selectAnswer(r),r})},n}(e.Case);e.ImageCase=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){t.call(this,n,r),this.type=e.CaseType.Input,this.title=r.text,this.expectedValue=r.type,this.value=""}return __extends(n,t),n.prototype.send=function(){var e={};e.inputs=[];var n=this.load();for(var r in n)n.hasOwnProperty(r)&&e.inputs.push({_id:r,value:n[r]});return t.prototype.makeSend.call(this,e).then(function(){return e})},n.prototype.validate=function(){if(this.correct=!1,this.incorrect=!1,this.page.settings.requiredAnswer&&!this.value?(this.error="Answer is required",this.incorrect=!0):(this.error="",this.correct=!0),this.correct){var e=this.load();return e[this.id]=this.value,this.save(e),!0}return!1},n}(e.Case);e.InputCase=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){t.call(this,n,r),this.type=e.CaseType.Iteration,this.selected=!1,this.ordinal=r.ordinal,this.symbol=r.symbol}return __extends(n,t),n.prototype.send=function(){var e=this;return!this.page.engageform.settings.allowAnswerChange&&this.page.filled?Bootstrap.$q.reject("Changing answer is not allowed"):t.prototype.makeSend.call(this,{quizQuestionId:this.page.id,rateItValue:this.ordinal}).then(function(n){var r={};return n.selectedValue&&(r.selectedValue=n.selectedValue),n.avgRateItValue&&(r.result=+n.avgRateItValue),t.prototype.save.call(e,r),e.page.selectAnswer(r),r})},n}(e.Case);e.IterationCase=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){t.call(this,n,r),this.type=e.CaseType.Text,this.selected=!1,this.correct=!1,this.incorrect=!1,this.title=r.text}return __extends(n,t),n.prototype.send=function(){var e=this;return!this.page.engageform.settings.allowAnswerChange&&this.page.filled?Bootstrap.$q.reject("Changing answer is not allowed"):t.prototype.makeSend.call(this,{selectedAnswerId:this.id}).then(function(n){var r={};n.selectedAnswerId&&(r.selectedCaseId=n.selectedAnswerId),n.correctAnswerId&&(r.correctCaseId=n.correctAnswerId);for(var o in n.stats)n.stats.hasOwnProperty(o)&&(r.results=r.results||{},/.{24}/.test(o)&&(r.results[o]=n.stats[o]));return t.prototype.save.call(e,r),e.page.selectAnswer(r),r})},n}(e.Case);e.TextCase=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){t.call(this,n,r),this.type=e.Type.EndPage,r.coverPage&&(this.button=r.coverPage.buttonText,this.outcome=r.coverPage.outcome,this.social=r.coverPage.showSocialShares,r.coverPage.scoreRange&&(this.rangeMax=r.coverPage.scoreRange.max,this.rangeMin=r.coverPage.scoreRange.min))}return __extends(n,t),n}(e.Page);e.EndPage=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){var o=this;t.call(this,n,r),this.type=e.Type.Form,r.forms&&(r.forms.inputs.map(function(t){o.cases.push(new e.InputCase(o,t))}),this.cases.length&&this.sent().then(function(e){o.selectAnswer(e)}))}return __extends(n,t),n.prototype.send=function(e){var t=Bootstrap.$q.defer(),n=!0;return this.cases.map(function(e){e.validate()||(n=!1)}),t.resolve(n?this.cases[0].send():{}),t.promise},n.prototype.selectAnswer=function(e){this.cases.map(function(t){t.value=e[t.id]||""})},n}(e.Page);e.Form=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){var o=this;t.call(this,n,r),this.type=e.Type.MultiChoice,r.answers&&(r.answers.map(function(t){o.cases.push(new e.TextCase(o,t))}),this.cases.length&&this.sent().then(function(e){o.selectAnswer(e)}))}return __extends(n,t),n.prototype.selectAnswer=function(e){var t=this;this.cases.map(function(n){n.selected=!1,n.correct=!1,n.incorrect=!1,n.id===e.selectedCaseId&&(t.filled=!0,n.selected=!0),e.results&&(n.result=e.results[n.id]||0),!e.correctCaseId||n.id!==e.correctCaseId&&n.id!==e.selectedCaseId||(n.id===e.correctCaseId?n.correct=!0:n.incorrect=!0)})},n}(e.Page);e.MultiChoice=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){var o=this;t.call(this,n,r),this.type=e.Type.PictureChoice,r.answers&&(r.answers.map(function(t){o.cases.push(new e.ImageCase(o,t))}),this.cases.length&&this.sent().then(function(e){o.selectAnswer(e)}))}return __extends(n,t),n.prototype.selectAnswer=function(e){var t=this;this.cases.map(function(n){n.selected=!1,n.correct=!1,n.incorrect=!1,n.id===e.selectedCaseId&&(t.filled=!0,n.selected=!0),e.results&&(n.result=e.results[n.id]||0),!e.correctCaseId||n.id!==e.correctCaseId&&n.id!==e.selectedCaseId||(n.id===e.correctCaseId?n.correct=!0:n.incorrect=!0)})},n}(e.Page);e.PictureChoice=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){var o=this;t.call(this,n,r),this.type=e.Type.Rateit,this.labelMin=r.rateIt.minLabel,this.labelMax=r.rateIt.maxLabel;for(var s=1;s<=r.rateIt.maxRateItValue;s++)this.cases.push(new e.IterationCase(this,{ordinal:s,symbol:r.rateIt.rateType}));this.sent().then(function(e){e.selectedValue&&o.selectAnswer(e)})}return __extends(n,t),n.prototype.selectAnswer=function(e){e.selectedValue&&(this.filled=!0),e.result&&(this.result=e.result),this.cases.map(function(t){t.selected=!1,e.selectedValue>=t.ordinal&&(t.selected=!0)})},n}(e.Page);e.Rateit=t}(Page||(Page={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},Page;!function(e){var t=function(t){function n(n,r){t.call(this,n,r),this.type=e.Type.StartPage,this.button="Let's get started",r.coverPage&&(this.button=r.coverPage.buttonText||this.button)}return __extends(n,t),n}(e.Page);e.StartPage=t}(Page||(Page={}));
//# sourceMappingURL=engageform.min.js.map